import{_ as s,o as a,c as n,a as l}from"./app.82235901.js";const i=JSON.parse('{"title":"\u5FAE\u670D\u52A1\u57FA\u7840","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u4F20\u7EDF\u9879\u76EE\u8F6C\u578B","slug":"\u4F20\u7EDF\u9879\u76EE\u8F6C\u578B"},{"level":2,"title":"\u8D70\u8FDB SpringCloud","slug":"\u8D70\u8FDB-springcloud"},{"level":2,"title":"Eureka \u6CE8\u518C\u4E2D\u5FC3","slug":"eureka-\u6CE8\u518C\u4E2D\u5FC3"},{"level":3,"title":"\u5FAE\u670D\u52A1\u9879\u76EE\u7ED3\u6784","slug":"\u5FAE\u670D\u52A1\u9879\u76EE\u7ED3\u6784"},{"level":3,"title":"\u670D\u52A1\u95F4\u8C03\u7528","slug":"\u670D\u52A1\u95F4\u8C03\u7528"},{"level":3,"title":"\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0","slug":"\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0"},{"level":3,"title":"\u6CE8\u518C\u4E2D\u5FC3\u9AD8\u53EF\u7528","slug":"\u6CE8\u518C\u4E2D\u5FC3\u9AD8\u53EF\u7528"},{"level":2,"title":"LoadBalancer \u8D1F\u8F7D\u5747\u8861","slug":"loadbalancer-\u8D1F\u8F7D\u5747\u8861"},{"level":3,"title":"\u8D1F\u8F7D\u5747\u8861","slug":"\u8D1F\u8F7D\u5747\u8861"},{"level":3,"title":"\u81EA\u5B9A\u4E49\u8D1F\u8F7D\u5747\u8861\u7B56\u7565","slug":"\u81EA\u5B9A\u4E49\u8D1F\u8F7D\u5747\u8861\u7B56\u7565"},{"level":3,"title":"OpenFeign \u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861","slug":"openfeign-\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861"},{"level":2,"title":"Hystrix \u670D\u52A1\u7194\u65AD","slug":"hystrix-\u670D\u52A1\u7194\u65AD"},{"level":3,"title":"\u670D\u52A1\u964D\u7EA7","slug":"\u670D\u52A1\u964D\u7EA7"},{"level":3,"title":"\u670D\u52A1\u7194\u65AD","slug":"\u670D\u52A1\u7194\u65AD"},{"level":3,"title":"OpenFeign \u5B9E\u73B0\u964D\u7EA7","slug":"openfeign-\u5B9E\u73B0\u964D\u7EA7"},{"level":3,"title":"\u76D1\u63A7\u9875\u9762\u90E8\u7F72","slug":"\u76D1\u63A7\u9875\u9762\u90E8\u7F72"},{"level":2,"title":"Gateway \u8DEF\u7531\u7F51\u5173","slug":"gateway-\u8DEF\u7531\u7F51\u5173"},{"level":3,"title":"\u90E8\u7F72\u7F51\u5173","slug":"\u90E8\u7F72\u7F51\u5173"},{"level":3,"title":"\u8DEF\u7531\u8FC7\u6EE4\u5668","slug":"\u8DEF\u7531\u8FC7\u6EE4\u5668"},{"level":2,"title":"Config \u914D\u7F6E\u4E2D\u5FC3","slug":"config-\u914D\u7F6E\u4E2D\u5FC3"},{"level":3,"title":"\u90E8\u7F72\u914D\u7F6E\u4E2D\u5FC3","slug":"\u90E8\u7F72\u914D\u7F6E\u4E2D\u5FC3"},{"level":3,"title":"\u5BA2\u6237\u7AEF\u914D\u7F6E","slug":"\u5BA2\u6237\u7AEF\u914D\u7F6E"},{"level":2,"title":"\u5FAE\u670D\u52A1 CAP \u539F\u5219","slug":"\u5FAE\u670D\u52A1-cap-\u539F\u5219"},{"level":3,"title":"AC \u53EF\u7528\u6027+\u4E00\u81F4\u6027","slug":"ac-\u53EF\u7528\u6027-\u4E00\u81F4\u6027"},{"level":3,"title":"CP \u4E00\u81F4\u6027+\u5206\u533A\u5BB9\u9519\u6027","slug":"cp-\u4E00\u81F4\u6027-\u5206\u533A\u5BB9\u9519\u6027"},{"level":3,"title":"AP \u53EF\u7528\u6027+\u5206\u533A\u5BB9\u9519\u6027","slug":"ap-\u53EF\u7528\u6027-\u5206\u533A\u5BB9\u9519\u6027"}],"relativePath":"note/SpingCloud/\u5FAE\u670D\u52A1\u57FA\u7840 Cloud Netflix.md"}'),p={name:"note/SpingCloud/\u5FAE\u670D\u52A1\u57FA\u7840 Cloud Netflix.md"},o=l(`<p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0d0lfurfij21o40d275h.jpg" alt="image-20220317173734208"></p><h1 id="\u5FAE\u670D\u52A1\u57FA\u7840" tabindex="-1">\u5FAE\u670D\u52A1\u57FA\u7840 <a class="header-anchor" href="#\u5FAE\u670D\u52A1\u57FA\u7840" aria-hidden="true">#</a></h1><p>**\u6CE8\u610F\uFF1A**\u6B64\u9636\u6BB5\u5B66\u4E60\u63A8\u8350\u7684\u7535\u8111\u914D\u7F6E\uFF0C\u81F3\u5C11\u914D\u5907 4 \u6838\u5FC3 CPU\uFF08\u4E3B\u9891 3.0Ghz \u4EE5\u4E0A\uFF09+16GB \u5185\u5B58\uFF0C\u5426\u5219\u5361\u5230\u4F60\u6000\u7591\u4EBA\u751F\u3002</p><p>\u524D\u9762\u6211\u4EEC\u8BB2\u89E3\u4E86 SpringBoot \u6846\u67B6\uFF0C\u901A\u8FC7\u4F7F\u7528 SpringBoot \u6846\u67B6\uFF0C\u6211\u4EEC\u7684\u9879\u76EE\u5F00\u53D1\u901F\u5EA6\u53EF\u4EE5\u8BF4\u662F\u5F97\u5230\u4E86\u8D28\u7684\u63D0\u5347\u3002\u540C\u65F6\uFF0C\u6211\u4EEC\u5BF9\u4E8E\u9879\u76EE\u7684\u7EF4\u62A4\u548C\u7406\u89E3\uFF0C\u4E5F\u4F1A\u66F4\u52A0\u7684\u8F7B\u677E\u3002\u53EF\u89C1\uFF0CSpringBoot \u4E3A\u6211\u4EEC\u7684\u5F00\u53D1\u5E26\u6765\u4E86\u5DE8\u5927\u4FBF\u6377\u3002\u800C\u8FD9\u4E00\u90E8\u5206\uFF0C\u6211\u4EEC\u5C06\u57FA\u4E8E SpringBoot\uFF0C\u7EE7\u7EED\u6DF1\u5165\u5230\u4F01\u4E1A\u5B9E\u9645\u573A\u666F\uFF0C\u63A2\u8BA8\u5FAE\u670D\u52A1\u67B6\u6784\u4E0B\u7684 SpringCloud\u3002\u8FD9\u4E2A\u90E8\u5206\u6211\u4EEC\u4F1A\u66F4\u52A0\u6CE8\u91CD\u4E8E\u67B6\u6784\u8BBE\u8BA1\u4E0A\u7684\u8BB2\u89E3\uFF0C\u5F31\u5316\u5B9E\u73B0\u539F\u7406\u65B9\u9762\u7684\u7814\u7A76\u3002</p><h2 id="\u4F20\u7EDF\u9879\u76EE\u8F6C\u578B" tabindex="-1">\u4F20\u7EDF\u9879\u76EE\u8F6C\u578B <a class="header-anchor" href="#\u4F20\u7EDF\u9879\u76EE\u8F6C\u578B" aria-hidden="true">#</a></h2><p>\u8981\u8BF4\u8FD1\u51E0\u5E74\u6700\u706B\u70ED\u7684\u8BDD\u9898\uFF0C\u90A3\u8FD8\u5F97\u662F\u5FAE\u670D\u52A1\uFF0C\u90A3\u4E48\u4EC0\u4E48\u662F\u5FAE\u670D\u52A1\u5462\uFF1F</p><p>\u6211\u4EEC\u53EF\u4EE5\u5148\u4ECE\u6280\u672F\u7684\u6F14\u53D8\u5F00\u59CB\u770B\u8D77\uFF0C\u5728\u6211\u4EEC\u5B66\u4E60 JavaWeb \u4E4B\u540E\uFF0C\u4E00\u822C\u7684\u7F51\u7AD9\u5F00\u53D1\u6A21\u5F0F\u4E3A Servlet+JSP\uFF0C\u4F46\u662F\u5B9E\u9645\u4E0A\u6211\u4EEC\u5728\u5B66\u4E60\u4E86 SSM \u4E4B\u540E\uFF0C\u4F1A\u53D1\u73B0\u8FD9\u79CD\u6A21\u5F0F\u5DF2\u7ECF\u8FDC\u8FDC\u843D\u540E\u4E86\uFF0C\u7B2C\u4E00\uFF0C\u4E00\u4E2A\u516C\u53F8\u4E0D\u53EF\u80FD\u53BB\u62DB\u90A3\u4E48\u591A\u540C\u65F6\u4F1A\u524D\u7AEF+\u540E\u7AEF\u7684\u5F00\u53D1\u4EBA\u5458\uFF0C\u5C31\u7B97\u62DB\u5230\uFF0C\u4E5F\u5E76\u4E0D\u4E00\u5B9A\u80FD\u4FDD\u8BC1\u4E24\u4E2A\u65B9\u9762\u90FD\u6BD4\u8F83\u64C5\u957F\uFF0C\u76F8\u6BD4\u524D\u540E\u7AEF\u5206\u5F00\u5B66\u4E60\u7684\u5F00\u53D1\u4EBA\u5458\uFF0C\u663E\u7136\u540E\u8005\u7684\u5B66\u4E60\u6210\u672C\u66F4\u4F4E\uFF0C\u4E13\u6CE8\u5EA6\u66F4\u9AD8\u3002\u56E0\u6B64\u524D\u540E\u7AEF\u5206\u79BB\u6210\u4E3A\u4E86\u4E00\u79CD\u65B0\u7684\u8D8B\u52BF\u3002\u901A\u8FC7\u4F7F\u7528 SpringBoot\uFF0C\u6211\u4EEC\u51E0\u4E4E\u53EF\u4EE5\u5F88\u5FEB\u901F\u5730\u5F00\u53D1\u4E00\u4E2A\u9AD8\u6027\u80FD\u7684\u5355\u4F53\u5E94\u7528\uFF0C\u53EA\u9700\u8981\u542F\u52A8\u4E00\u4E2A\u670D\u52A1\u7AEF\uFF0C\u6211\u4EEC\u6574\u4E2A\u9879\u76EE\u5C31\u5F00\u59CB\u8FD0\u884C\u4E86\uFF0C\u5404\u9879\u529F\u80FD\u878D\u4E8E\u4E00\u4F53\uFF0C\u5F00\u53D1\u8D77\u6765\u4E5F\u66F4\u52A0\u8F7B\u677E\u3002</p><p>\u4F46\u662F\u968F\u7740\u6211\u4EEC\u9879\u76EE\u7684\u4E0D\u65AD\u6269\u5927\uFF0C\u5355\u4F53\u5E94\u7528\u4F3C\u4E4E\u663E\u5F97\u6709\u70B9\u4E4F\u529B\u4E86\u3002</p><p>\u968F\u7740\u8D8A\u6765\u8D8A\u591A\u7684\u529F\u80FD\u4E0D\u65AD\u5730\u52A0\u5165\u5230\u4E00\u4E2A SpringBoot \u9879\u76EE\u4E2D\uFF0C\u968F\u7740\u63A5\u53E3\u4E0D\u65AD\u589E\u52A0\uFF0C\u6574\u4E2A\u7CFB\u7EDF\u5C31\u8981\u5728\u540C\u4E00\u65F6\u95F4\u5185\u54CD\u5E94\u66F4\u591A\u7C7B\u578B\u7684\u8BF7\u6C42\uFF0C\u663E\u7136\uFF0C\u8FD9\u79CD\u6269\u5C55\u65B9\u5F0F\u662F\u4E0D\u53EF\u80FD\u65E0\u9650\u4F7F\u7528\u4E0B\u53BB\u7684\uFF0C\u603B\u6709\u4E00\u5929\uFF0C\u8FD9\u4E2A SpringBoot \u9879\u76EE\u4F1A\u5E9E\u5927\u5230\u8FD0\u884C\u7F13\u6162\u3002\u5E76\u4E14\u6240\u6709\u7684\u529F\u80FD\u5982\u679C\u90FD\u96C6\u6210\u5728\u5355\u7AEF\u4E0A\uFF0C\u90A3\u4E48\u6240\u6709\u7684\u8BF7\u6C42\u90FD\u4F1A\u5168\u90E8\u6C47\u96C6\u5230\u4E00\u53F0\u670D\u52A1\u5668\u4E0A\uFF0C\u5BF9\u6B64\u670D\u52A1\u5668\u9020\u6210\u5DE8\u5927\u538B\u529B\u3002</p><p>\u53EF\u4EE5\u8BD5\u60F3\u4E00\u4E0B\uFF0C\u5982\u679C\u6211\u4EEC\u7684\u7535\u8111\u5DF2\u7ECF\u5347\u7EA7\u5230 i9-12900K\uFF0C\u4F46\u662F\u4F9D\u7136\u5728\u8FD0\u884C\u9879\u76EE\u7684\u65F6\u5019\u7F13\u6162\uFF0C\u65E0\u6CD5\u540C\u4E00\u65F6\u95F4\u54CD\u5E94\u6210\u5343\u4E0A\u4E07\u7684\u8BF7\u6C42\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u95EE\u9898\u5C31\u5DF2\u7ECF\u4E0D\u662F\u5355\u7EAF\u5347\u7EA7\u673A\u5668\u914D\u7F6E\u53EF\u4EE5\u89E3\u51B3\u7684\u4E86\u3002</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0ghpknvdvj21zg0go78r.jpg" alt="image-20220320174622739"></p><p>\u4F20\u7EDF\u5355\u4F53\u67B6\u6784\u5E94\u7528\u968F\u7740\u9879\u76EE\u89C4\u6A21\u7684\u6269\u5927\uFF0C\u5B9E\u9645\u4E0A\u4F1A\u66B4\u9732\u8D8A\u6765\u8D8A\u591A\u7684\u95EE\u9898\uFF0C\u5C24\u5176\u662F\u4E00\u53F0\u670D\u52A1\u5668\u65E0\u6CD5\u627F\u53D7\u5E9E\u5927\u7684\u5355\u4F53\u5E94\u7528\u90E8\u7F72\uFF0C\u5E76\u4E14\u5355\u4F53\u5E94\u7528\u7684\u7EF4\u62A4\u4E5F\u4F1A\u8D8A\u6765\u8D8A\u56F0\u96BE\uFF0C\u6211\u4EEC\u5F97\u5BFB\u627E\u4E00\u79CD\u65B0\u7684\u5F00\u53D1\u67B6\u6784\u6765\u89E3\u51B3\u8FD9\u4E9B\u95EE\u9898\u4E86\u3002</p><blockquote><p>In short, the microservice architectural style is an approach to developing a single application as a suite of small services, each running in its own process and communicating with lightweight mechanisms, often an HTTP resource API. These services are built around business capabilities and independently deployable by fully automated deployment machinery. There is a bare minimum of centralized management of these services, which may be written in different programming languages and use different data storage technologies.</p></blockquote><p>Martin Fowler \u5728 2014 \u5E74\u63D0\u51FA\u4E86\u201C\u5FAE\u670D\u52A1\u201D\u67B6\u6784\uFF0C\u5B83\u662F\u4E00\u79CD\u5168\u65B0\u7684\u67B6\u6784\u98CE\u683C\u3002</p><ul><li>\u5FAE\u670D\u52A1\u628A\u4E00\u4E2A\u5E9E\u5927\u7684\u5355\u4F53\u5E94\u7528\u62C6\u5206\u4E3A\u4E00\u4E2A\u4E2A\u7684\u5C0F\u578B\u670D\u52A1\uFF0C\u6BD4\u5982\u6211\u4EEC\u539F\u6765\u7684\u56FE\u4E66\u7BA1\u7406\u9879\u76EE\u4E2D\uFF0C\u6709\u767B\u5F55\u3001\u6CE8\u518C\u3001\u6DFB\u52A0\u3001\u5220\u9664\u3001\u641C\u7D22\u7B49\u529F\u80FD\uFF0C\u90A3\u4E48\u6211\u4EEC\u53EF\u4EE5\u5C06\u8FD9\u4E9B\u529F\u80FD\u5355\u72EC\u505A\u6210\u4E00\u4E2A\u4E2A\u5C0F\u578B\u7684 SpringBoot \u9879\u76EE\uFF0C\u72EC\u7ACB\u8FD0\u884C\u3002</li><li>\u6BCF\u4E2A\u5C0F\u578B\u7684\u5FAE\u670D\u52A1\uFF0C\u90FD\u53EF\u4EE5\u72EC\u7ACB\u90E8\u7F72\u548C\u5347\u7EA7\uFF0C\u8FD9\u6837\uFF0C\u5C31\u7B97\u6574\u4E2A\u7CFB\u7EDF\u5D29\u6E83\uFF0C\u90A3\u4E48\u4E5F\u53EA\u4F1A\u5F71\u54CD\u4E00\u4E2A\u670D\u52A1\u7684\u8FD0\u884C\u3002</li><li>\u5FAE\u670D\u52A1\u4E4B\u95F4\u4F7F\u7528 HTTP \u8FDB\u884C\u6570\u636E\u4EA4\u4E92\uFF0C\u4E0D\u518D\u662F\u5355\u4F53\u5E94\u7528\u5185\u90E8\u4EA4\u4E92\u4E86\uFF0C\u867D\u7136\u8FD9\u6837\u4F1A\u663E\u5F97\u66F4\u9EBB\u70E6\uFF0C\u4F46\u662F\u5E26\u6765\u7684\u597D\u5904\u4E5F\u662F\u5F88\u76F4\u63A5\u7684\uFF0C\u751A\u81F3\u80FD\u7A81\u7834\u8BED\u8A00\u9650\u5236\uFF0C\u4F7F\u7528\u4E0D\u540C\u7684\u7F16\u7A0B\u8BED\u8A00\u8FDB\u884C\u5FAE\u670D\u52A1\u5F00\u53D1\uFF0C\u53EA\u9700\u8981\u4F7F\u7528 HTTP \u8FDB\u884C\u6570\u636E\u4EA4\u4E92\u5373\u53EF\u3002</li><li>\u6211\u4EEC\u53EF\u4EE5\u540C\u65F6\u8D2D\u4E70\u591A\u53F0\u4E3B\u673A\u6765\u5206\u522B\u90E8\u7F72\u8FD9\u4E9B\u5FAE\u670D\u52A1\uFF0C\u8FD9\u6837\uFF0C\u5355\u673A\u7684\u538B\u529B\u5C31\u88AB\u5206\u6563\u5230\u591A\u53F0\u673A\u5668\uFF0C\u5E76\u4E14\u6BCF\u53F0\u673A\u5668\u7684\u914D\u7F6E\u4E0D\u4E00\u5B9A\u9700\u8981\u592A\u9AD8\uFF0C\u8FD9\u6837\u5C31\u80FD\u8282\u7701\u5927\u91CF\u7684\u6210\u672C\uFF0C\u540C\u65F6\u5B89\u5168\u6027\u4E5F\u5F97\u5230\u5F88\u5927\u7684\u4FDD\u8BC1\u3002</li><li>\u751A\u81F3\u540C\u4E00\u4E2A\u5FAE\u670D\u52A1\u53EF\u4EE5\u540C\u65F6\u5B58\u5728\u591A\u4E2A\uFF0C\u8FD9\u6837\u5F53\u5176\u4E2D\u4E00\u4E2A\u670D\u52A1\u5668\u51FA\u73B0\u95EE\u9898\u65F6\uFF0C\u5176\u4ED6\u670D\u52A1\u5668\u4E5F\u5728\u8FD0\u884C\u540C\u6837\u7684\u5FAE\u670D\u52A1\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u4FDD\u8BC1\u4E00\u4E2A\u5FAE\u670D\u52A1\u7684\u9AD8\u53EF\u7528\u3002</li></ul><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0idyqgp12j21m00im0wa.jpg" alt="image-20220322090754438"></p><p>\u5F53\u7136\uFF0C\u8FD9\u91CC\u53EA\u662F\u7B80\u5355\u7684\u6F14\u793A\u4E00\u4E0B\u5FAE\u670D\u52A1\u67B6\u6784\uFF0C\u5B9E\u9645\u5F00\u53D1\u4E2D\u80AF\u5B9A\u662F\u6BD4\u8FD9\u4E2A\u590D\u6742\u5F97\u591A\u7684\u3002</p><p>\u53EF\u89C1\uFF0C\u91C7\u7528\u5FAE\u670D\u52A1\u67B6\u6784\uFF0C\u66F4\u52A0\u80FD\u591F\u5E94\u5BF9\u5F53\u4ECA\u65F6\u4EE3\u4E0B\u7684\u79CD\u79CD\u8003\u9A8C\uFF0C\u4F20\u7EDF\u9879\u76EE\u7684\u5F00\u53D1\u6A21\u5F0F\uFF0C\u9700\u8981\u8FDB\u884C\u67B6\u6784\u4E0A\u7684\u5347\u7EA7\u3002</p><h2 id="\u8D70\u8FDB-springcloud" tabindex="-1">\u8D70\u8FDB SpringCloud <a class="header-anchor" href="#\u8D70\u8FDB-springcloud" aria-hidden="true">#</a></h2><p>\u524D\u9762\u6211\u4EEC\u4ECB\u7ECD\u4E86\u5FAE\u670D\u52A1\u67B6\u6784\u7684\u4F18\u70B9\uFF0C\u90A3\u4E48\u540C\u6837\u7684\uFF0C\u8FD9\u4E9B\u4F18\u70B9\u7684\u80CC\u540E\u4E5F\u5B58\u5728\u7740\u8BF8\u591A\u7684\u95EE\u9898\uFF1A</p><ul><li>\u8981\u5B9E\u73B0\u5FAE\u670D\u52A1\u5E76\u4E0D\u662F\u8BF4\u53EA\u9700\u8981\u7B80\u5355\u5730\u5C06\u9879\u76EE\u8FDB\u884C\u62C6\u5206\uFF0C\u6211\u4EEC\u8FD8\u9700\u8981\u8003\u8651\u5BF9\u5404\u4E2A\u5FAE\u670D\u52A1\u8FDB\u884C\u7BA1\u7406\u3001\u76D1\u63A7\u7B49\uFF0C\u8FD9\u6837\u6211\u4EEC\u624D\u80FD\u591F\u53CA\u65F6\u5730\u5BFB\u627E\u548C\u6392\u67E5\u95EE\u9898\u3002\u56E0\u6B64\u5FAE\u670D\u52A1\u5F80\u5F80\u9700\u8981\u7684\u662F\u4E00\u6574\u5957\u89E3\u51B3\u65B9\u6848\uFF0C\u5305\u62EC\u670D\u52A1\u6CE8\u518C\u548C\u53D1\u73B0\u3001\u5BB9\u707E\u5904\u7406\u3001\u8D1F\u8F7D\u5747\u8861\u3001\u914D\u7F6E\u7BA1\u7406\u7B49\u3002</li><li>\u5B83\u4E0D\u50CF\u5355\u4F53\u67B6\u6784\u90A3\u79CD\u65B9\u4FBF\u7EF4\u62A4\uFF0C\u7531\u4E8E\u90E8\u7F72\u5728\u591A\u4E2A\u670D\u52A1\u5668\uFF0C\u6211\u4EEC\u4E0D\u5F97\u4E0D\u53BB\u4FDD\u8BC1\u5404\u4E2A\u5FAE\u670D\u52A1\u80FD\u591F\u7A33\u5B9A\u8FD0\u884C\uFF0C\u5728\u7BA1\u7406\u96BE\u5EA6\u4E0A\u80AF\u5B9A\u662F\u9AD8\u4E8E\u4F20\u7EDF\u5355\u4F53\u5E94\u7528\u7684\u3002</li><li>\u5728\u5206\u5E03\u5F0F\u7684\u73AF\u5883\u4E0B\uFF0C\u5355\u4F53\u5E94\u7528\u7684\u67D0\u4E9B\u529F\u80FD\u53EF\u80FD\u4F1A\u53D8\u5F97\u6BD4\u8F83\u9EBB\u70E6\uFF0C\u6BD4\u5982\u5206\u5E03\u5F0F\u4E8B\u52A1\u3002</li></ul><p>\u6240\u4EE5\uFF0C\u4E3A\u4E86\u66F4\u597D\u5730\u89E3\u51B3\u8FD9\u4E9B\u95EE\u9898\uFF0CSpringCloud \u6B63\u5F0F\u767B\u573A\u3002</p><p>SpringCloud \u662F Spring \u63D0\u4F9B\u7684\u4E00\u5957\u5206\u5E03\u5F0F\u89E3\u51B3\u65B9\u6848\uFF0C\u96C6\u5408\u4E86\u4E00\u4E9B\u5927\u578B\u4E92\u8054\u7F51\u516C\u53F8\u7684\u5F00\u6E90\u4EA7\u54C1\uFF0C\u5305\u62EC\u8BF8\u591A\u7EC4\u4EF6\uFF0C\u5171\u540C\u7EC4\u6210 SpringCloud \u6846\u67B6\u3002\u5E76\u4E14\uFF0C\u5B83\u5229\u7528 Spring Boot \u7684\u5F00\u53D1\u4FBF\u5229\u6027\u5DE7\u5999\u5730\u7B80\u5316\u4E86\u5206\u5E03\u5F0F\u7CFB\u7EDF\u57FA\u7840\u8BBE\u65BD\u7684\u5F00\u53D1\uFF0C\u5982\u670D\u52A1\u53D1\u73B0\u6CE8\u518C\u3001\u914D\u7F6E\u4E2D\u5FC3\u3001\u6D88\u606F\u603B\u7EBF\u3001\u8D1F\u8F7D\u5747\u8861\u3001\u7194\u65AD\u673A\u5236\u3001\u6570\u636E\u76D1\u63A7\u7B49\uFF0C\u90FD\u53EF\u4EE5\u7528 Spring Boot \u7684\u5F00\u53D1\u98CE\u683C\u505A\u5230\u4E00\u952E\u542F\u52A8\u548C\u90E8\u7F72\u3002</p><p>\u7531\u4E8E\u4E2D\u5C0F\u578B\u516C\u53F8\u6CA1\u6709\u72EC\u7ACB\u5F00\u53D1\u81EA\u5DF1\u7684\u5206\u5E03\u5F0F\u57FA\u7840\u8BBE\u65BD\u7684\u80FD\u529B\uFF0C\u4F7F\u7528 SpringCloud \u89E3\u51B3\u65B9\u6848\u80FD\u591F\u4EE5\u6700\u4F4E\u7684\u6210\u672C\u5E94\u5BF9\u5F53\u524D\u65F6\u4EE3\u7684\u4E1A\u52A1\u53D1\u5C55\u3002</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0ig93rk52j21ss0nytbj.jpg" alt="image-20220322102706256"></p><p>\u53EF\u4EE5\u770B\u5230\uFF0CSpringCloud \u6574\u4F53\u67B6\u6784\u7684\u4EAE\u70B9\u662F\u975E\u5E38\u660E\u663E\u7684\uFF0C\u5206\u5E03\u5F0F\u67B6\u6784\u4E0B\u7684\u5404\u4E2A\u573A\u666F\uFF0C\u90FD\u6709\u5BF9\u5E94\u7684\u7EC4\u4EF6\u6765\u5904\u7406\uFF0C\u6BD4\u5982\u57FA\u4E8E Netflix\uFF08\u5948\u98DE\uFF09\u7684\u5F00\u6E90\u5206\u5E03\u5F0F\u89E3\u51B3\u65B9\u6848\u63D0\u4F9B\u7684\u7EC4\u4EF6\uFF1A</p><ul><li>Eureka - \u5B9E\u73B0\u670D\u52A1\u6CBB\u7406\uFF08\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\uFF09\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u6240\u6709\u7684\u5FAE\u670D\u52A1\u8FDB\u884C\u96C6\u4E2D\u7BA1\u7406\uFF0C\u5305\u62EC\u4ED6\u4EEC\u7684\u8FD0\u884C\u72B6\u6001\u3001\u4FE1\u606F\u7B49\u3002</li><li>Ribbon - \u4E3A\u670D\u52A1\u4E4B\u95F4\u76F8\u4E92\u8C03\u7528\u63D0\u4F9B\u8D1F\u8F7D\u5747\u8861\u7B97\u6CD5\uFF08\u73B0\u5728\u88AB SpringCloudLoadBalancer \u53D6\u4EE3\uFF09</li><li>Hystrix - \u65AD\u8DEF\u5668\uFF0C\u4FDD\u62A4\u7CFB\u7EDF\uFF0C\u63A7\u5236\u6545\u969C\u8303\u56F4\u3002\u6682\u65F6\u53EF\u4EE5\u8DDF\u5BB6\u91CC\u7535\u95F8\u7684\u4FDD\u9669\u4E1D\u7C7B\u6BD4\uFF0C\u5F53\u89E6\u7535\u5371\u9669\u53D1\u751F\u65F6\u80FD\u591F\u9632\u6B62\u8FDB\u4E00\u6B65\u7684\u53D1\u5C55\u3002</li><li>Zuul - api \u7F51\u5173\uFF0C\u8DEF\u7531\uFF0C\u8D1F\u8F7D\u5747\u8861\u7B49\u591A\u79CD\u4F5C\u7528\uFF0C\u5C31\u50CF\u6211\u4EEC\u7684\u8DEF\u7531\u5668\uFF0C\u53EF\u80FD\u6709\u5F88\u591A\u4E2A\u8BBE\u5907\u90FD\u8FDE\u63A5\u4E86\u8DEF\u7531\u5668\uFF0C\u4F46\u662F\u6570\u636E\u5305\u8981\u8F6C\u53D1\u7ED9\u8C01\u5219\u662F\u7531\u8DEF\u7531\u5668\u5728\u8FDB\u884C\uFF08\u5DF2\u7ECF\u88AB SpringCloudGateway \u53D6\u4EE3\uFF09</li><li>Config - \u914D\u7F6E\u7BA1\u7406\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u914D\u7F6E\u6587\u4EF6\u96C6\u4E2D\u7BA1\u7406</li></ul><p>\u5F53\u7136\uFF0C\u8FD9\u91CC\u53EA\u662F\u8FDB\u884C\u7B80\u5355\u7684\u4E86\u89E3\u5373\u53EF\uFF0C\u5B9E\u9645\u4E0A\u5FAE\u670D\u52A1\u7684\u73A9\u6CD5\u975E\u5E38\u591A\uFF0C\u6211\u4EEC\u540E\u9762\u7684\u5B66\u4E60\u4E2D\u5C06\u4F1A\u9010\u6B65\u8FDB\u884C\u63A2\u7D22\u3002</p><p>\u90A3\u4E48\u9996\u5148\uFF0C\u6211\u4EEC\u5C31\u4ECE\u6CE8\u518C\u4E2D\u5FC3\u5F00\u59CB\u8BF4\u8D77\u3002</p><hr><h2 id="eureka-\u6CE8\u518C\u4E2D\u5FC3" tabindex="-1">Eureka \u6CE8\u518C\u4E2D\u5FC3 <a class="header-anchor" href="#eureka-\u6CE8\u518C\u4E2D\u5FC3" aria-hidden="true">#</a></h2><p>\u5B98\u65B9\u6587\u6863\uFF1A<a href="https://docs.spring.io/spring-cloud-netflix/docs/current/reference/html/" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-cloud-netflix/docs/current/reference/html/</a></p><p>**\u5C0F\u8D34\u58EB\uFF1A**\u5404\u4F4D\u5C0F\u4F19\u4F34\u5728\u5B66\u4E60\u7684\u8FC7\u7A0B\u4E2D\u89C9\u5F97\u6709\u4EC0\u4E48\u7591\u60D1\u7684\u53EF\u4EE5\u76F4\u63A5\u67E5\u9605\u5B98\u65B9\u6587\u6863\uFF0C\u6211\u4EEC\u4F1A\u5728\u6BCF\u4E00\u4E2A\u6280\u672F\u5F00\u59CB\u4E4B\u524D\u8D34\u4E0A\u5B98\u65B9\u6587\u6863\u7684\u5730\u5740\uFF0C\u65B9\u4FBF\u5404\u4F4D\u8FDB\u884C\u67E5\u9605\uFF0C\u540C\u65F6\u5728\u6211\u4EEC\u7684\u8BFE\u7A0B\u4E2D\u5E76\u4E0D\u4E00\u5B9A\u4F1A\u5B8C\u5B8C\u6574\u6574\u5730\u8BB2\u5B8C\u6574\u4E2A\u6846\u67B6\u7684\u5185\u5BB9\uFF0C\u6709\u5173\u8BE6\u7EC6\u7684\u529F\u80FD\u548C\u4F7F\u7528\u65B9\u6CD5\u6587\u6863\u4E2D\u4E5F\u662F\u5199\u7684\u975E\u5E38\u6E05\u695A\u7684\uFF0C\u611F\u5174\u8DA3\u7684\u53EF\u4EE5\u6DF1\u5165\u5B66\u4E60\u54E6\u3002</p><h3 id="\u5FAE\u670D\u52A1\u9879\u76EE\u7ED3\u6784" tabindex="-1">\u5FAE\u670D\u52A1\u9879\u76EE\u7ED3\u6784 <a class="header-anchor" href="#\u5FAE\u670D\u52A1\u9879\u76EE\u7ED3\u6784" aria-hidden="true">#</a></h3><p>\u73B0\u5728\u6211\u4EEC\u91CD\u65B0\u8BBE\u8BA1\u4E00\u4E0B\u4E4B\u524D\u7684\u56FE\u4E66\u7BA1\u7406\u7CFB\u7EDF\u9879\u76EE\uFF0C\u5C06\u539F\u6709\u7684\u5927\u578B\uFF08\u4E5F\u8BB8 \u9879\u76EE\u8FDB\u884C\u62C6\u5206\uFF0C\u6CE8\u610F\u9879\u76EE\u62C6\u5206\u4E00\u5B9A\u8981\u5C3D\u53EF\u80FD\u4FDD\u8BC1\u5355\u4E00\u804C\u8D23\uFF0C\u76F8\u540C\u7684\u4E1A\u52A1\u4E0D\u8981\u5728\u591A\u4E2A\u5FAE\u670D\u52A1\u4E2D\u91CD\u590D\u51FA\u73B0\uFF0C\u5982\u679C\u51FA\u73B0\u9700\u8981\u501F\u52A9\u5176\u4ED6\u4E1A\u52A1\u5B8C\u6210\u7684\u670D\u52A1\uFF0C\u90A3\u4E48\u53EF\u4EE5\u4F7F\u7528\u670D\u52A1\u4E4B\u95F4\u76F8\u4E92\u8C03\u7528\u7684\u5F62\u5F0F\u6765\u5B9E\u73B0\uFF08\u4E4B\u540E\u4F1A\u4ECB\u7ECD\uFF09\uFF1A</p><ul><li>\u767B\u5F55\u9A8C\u8BC1\u670D\u52A1\uFF1A\u7528\u4E8E\u5904\u7406\u7528\u6237\u6CE8\u518C\u3001\u767B\u5F55\u3001\u5BC6\u7801\u91CD\u7F6E\u7B49\uFF0C\u53CD\u6B63\u5C31\u662F\u4E00\u5207\u4E0E\u8D26\u6237\u76F8\u5173\u7684\u5185\u5BB9\uFF0C\u5305\u62EC\u7528\u6237\u4FE1\u606F\u83B7\u53D6\u7B49\u3002</li><li>\u56FE\u4E66\u7BA1\u7406\u670D\u52A1\uFF1A\u7528\u4E8E\u8FDB\u884C\u56FE\u4E66\u6DFB\u52A0\u3001\u5220\u9664\u3001\u66F4\u65B0\u7B49\u64CD\u4F5C\uFF0C\u56FE\u4E66\u7BA1\u7406\u76F8\u5173\u7684\u670D\u52A1\uFF0C\u5305\u62EC\u56FE\u4E66\u7684\u5B58\u50A8\u7B49\u548C\u4FE1\u606F\u83B7\u53D6\u3002</li><li>\u56FE\u4E66\u501F\u9605\u670D\u52A1\uFF1A\u4EA4\u4E92\u6027\u6BD4\u8F83\u5F3A\u7684\u670D\u52A1\uFF0C\u9700\u8981\u548C\u767B\u9646\u9A8C\u8BC1\u670D\u52A1\u548C\u56FE\u4E66\u7BA1\u7406\u670D\u52A1\u8FDB\u884C\u4EA4\u4E92\u3002</li></ul><p>\u90A3\u4E48\u65E2\u7136\u8981\u5C06\u5355\u4F53\u5E94\u7528\u62C6\u5206\u4E3A\u591A\u4E2A\u5C0F\u578B\u670D\u52A1\uFF0C\u6211\u4EEC\u5C31\u9700\u8981\u91CD\u65B0\u8BBE\u8BA1\u4E00\u4E0B\u6574\u4E2A\u9879\u76EE\u76EE\u5F55\u7ED3\u6784\uFF0C\u8FD9\u91CC\u6211\u4EEC\u5C31\u521B\u5EFA\u591A\u4E2A\u5B50\u9879\u76EE\uFF0C\u6BCF\u4E00\u4E2A\u5B50\u9879\u76EE\u90FD\u662F\u4E00\u4E2A\u670D\u52A1\uFF0C\u8FD9\u6837\u7531\u7236\u9879\u76EE\u7EDF\u4E00\u7BA1\u7406\u4F9D\u8D56\uFF0C\u5C31\u65E0\u9700\u6BCF\u4E2A\u5B50\u9879\u76EE\u90FD\u53BB\u5355\u72EC\u7BA1\u7406\u4F9D\u8D56\u4E86\uFF0C\u4E5F\u66F4\u65B9\u4FBF\u4E00\u70B9\u3002</p><p>\u6211\u4EEC\u9996\u5148\u521B\u5EFA\u4E00\u4E2A\u666E\u901A\u7684 SpringBoot \u9879\u76EE\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jmp0yg1lj21zh0u0q8t.jpg" alt="image-20220323105531867"></p><p>\u7136\u540E\u4E0D\u9700\u8981\u52FE\u9009\u4EFB\u4F55\u4F9D\u8D56\uFF0C\u76F4\u63A5\u521B\u5EFA\u5373\u53EF\uFF0C\u9879\u76EE\u521B\u5EFA\u5B8C\u6210\u5E76\u521D\u59CB\u5316\u540E\uFF0C\u6211\u4EEC\u5220\u9664\u7236\u5DE5\u7A0B\u7684\u65E0\u7528\u6587\u4EF6\uFF0C\u53EA\u4FDD\u7559\u5FC5\u8981\u6587\u4EF6\uFF0C\u50CF\u4E0B\u9762\u8FD9\u6837\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jmsk8wcrj21rw0lojt4.jpg" alt="image-20220323105859454"></p><p>\u63A5\u7740\u6211\u4EEC\u5C31\u53EF\u4EE5\u6309\u7167\u6211\u4EEC\u5212\u5206\u7684\u670D\u52A1\uFF0C\u8FDB\u884C\u5B50\u5DE5\u7A0B\u521B\u5EFA\u4E86\uFF0C\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 Maven \u9879\u76EE\uFF0C\u6CE8\u610F\u7236\u9879\u76EE\u8981\u6307\u5B9A\u4E3A\u6211\u4EEC\u4E00\u5F00\u59CB\u521B\u5EFA\u7684\u7684\u9879\u76EE\uFF0C\u5B50\u9879\u76EE\u547D\u540D\u968F\u610F\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jmv8tewij21rc0f640q.jpg" alt="image-20220323110133466"></p><p>\u5B50\u9879\u76EE\u521B\u5EFA\u597D\u4E4B\u540E\uFF0C\u63A5\u7740\u6211\u4EEC\u5728\u5B50\u9879\u76EE\u4E2D\u521B\u5EFA SpringBoot \u7684\u542F\u52A8\u4E3B\u7C7B\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jn1w0ru4j21ra0kedkk.jpg" alt="image-20220323110756722"></p><p>\u63A5\u7740\u6211\u4EEC\u70B9\u51FB\u8FD0\u884C\uFF0C\u5373\u53EF\u542F\u52A8\u5B50\u9879\u76EE\u4E86\uFF0C\u5B9E\u9645\u4E0A\u8FD9\u4E2A\u5B50\u9879\u76EE\u5C31\u4E00\u4E2A\u6700\u7B80\u5355\u7684 SpringBoot web \u9879\u76EE\uFF0C\u6CE8\u610F\u542F\u52A8\u4E4B\u540E\u6700\u4E0B\u65B9\u6709\u5F39\u7A97\uFF0C\u6211\u4EEC\u70B9\u51FB&quot;\u4F7F\u7528 \u670D\u52A1&quot;\uFF0C\u8FD9\u6837\u6211\u4EEC\u5C31\u53EF\u4EE5\u5B9E\u65F6\u67E5\u770B\u5F53\u524D\u6574\u4E2A\u5927\u9879\u76EE\u4E2D\u6709\u54EA\u4E9B\u5FAE\u670D\u52A1\u4E86\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jn3ah2t1j21by078t9h.jpg" alt="image-20220323110917997"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jn50f7aqj22po0kygus.jpg" alt="image-20220323111056940"></p><p>\u63A5\u7740\u6211\u4EEC\u4EE5\u540C\u6837\u7684\u65B9\u6CD5\uFF0C\u521B\u5EFA\u5176\u4ED6\u7684\u5B50\u9879\u76EE\uFF0C\u6CE8\u610F\u6211\u4EEC\u6700\u597D\u5C06\u5176\u4ED6\u5B50\u9879\u76EE\u7684\u7AEF\u53E3\u8BBE\u7F6E\u5F97\u4E0D\u4E00\u6837\uFF0C\u4E0D\u7136\u4F1A\u5BFC\u81F4\u7AEF\u53E3\u5360\u7528\uFF0C\u6211\u4EEC\u5206\u522B\u4E3A\u5B83\u4EEC\u521B\u5EFA<code>application.yml</code>\u6587\u4EF6\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jnbw1wi8j22ci0i2778.jpg" alt="image-20220323111733605"></p><p>\u63A5\u7740\u6211\u4EEC\u6765\u5C1D\u8BD5\u542F\u52A8\u4E00\u4E0B\u8FD9\u4E09\u4E2A\u670D\u52A1\uFF0C\u6B63\u5E38\u60C5\u51B5\u4E0B\u90FD\u662F\u53EF\u4EE5\u76F4\u63A5\u542F\u52A8\u7684\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jnd7uz99j22q40ks7dw.jpg" alt="image-20220323111849846"></p><p>\u53EF\u4EE5\u770B\u5230\u5B83\u4EEC\u5206\u522B\u8FD0\u884C\u5728\u4E0D\u540C\u7684\u7AEF\u53E3\u4E0A\uFF0C\u8FD9\u6837\uFF0C\u5C31\u65B9\u4FBF\u4E0D\u540C\u7684\u7A0B\u5E8F\u5458\u7F16\u5199\u4E0D\u540C\u7684\u670D\u52A1\u4E86\uFF0C\u63D0\u4EA4\u5F53\u524D\u9879\u76EE\u4EE3\u7801\u65F6\u7684\u51B2\u7A81\u7387\u4E5F\u4F1A\u964D\u4F4E\u3002</p><p>\u63A5\u7740\u6211\u4EEC\u6765\u521B\u5EFA\u4E00\u4E0B\u6570\u636E\u5E93\uFF0C\u8FD9\u91CC\u8FD8\u662F\u8001\u6837\u5B50\uFF0C\u521B\u5EFA\u4E09\u4E2A\u8868\u5373\u53EF\uFF0C\u5F53\u7136\u5B9E\u9645\u4E0A\u6BCF\u4E2A\u5FAE\u670D\u52A1\u5355\u72EC\u4F7F\u7528\u4E00\u4E2A\u6570\u636E\u5E93\u670D\u52A1\u5668\u4E5F\u662F\u53EF\u4EE5\u7684\uFF0C\u56E0\u4E3A\u6309\u7167\u5355\u4E00\u804C\u8D23\u670D\u52A1\u53EA\u4F1A\u64CD\u4F5C\u81EA\u5DF1\u5BF9\u5E94\u7684\u8868\uFF0C\u8FD9\u91CC UP \u4E3B\u6BD4\u8F83\u7A77\uFF0C\u5C31\u53EA\u7528\u4E00\u4E2A\u6570\u636E\u5E93\u6F14\u793A\u4E86\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jni9lpt1j214w09w3zd.jpg" alt="image-20220323112340995"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jnkydk2mj214y090t9h.jpg" alt="image-20220323112616538"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jnnhmt9vj214a072t99.jpg" alt="image-20220323112842758"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jnmlc81qj214806a0th.jpg" alt="image-20220323112750936"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jnn6v8jrj214o04y3yw.jpg" alt="image-20220323112825430"></p><p>\u521B\u5EFA\u597D\u4E4B\u540E\uFF0C\u7ED3\u679C\u5982\u4E0B\uFF0C\u4E00\u5171\u4E09\u5F20\u8868\uFF0C\u5404\u4F4D\u53EF\u4EE5\u81EA\u884C\u6DFB\u52A0\u4E00\u4E9B\u6570\u636E\u5230\u91CC\u9762\uFF0C\u8FD9\u5C31\u4E0D\u8D34\u51FA\u6765\u4E86\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0jno6ge9hj21go07mab1.jpg" alt="image-20220323112922396"></p><p>\u5982\u679C\u5404\u4F4D\u5ACC\u9EBB\u70E6\u7684\u8BDD\u53EF\u4EE5\u4E0B\u8F7D<code>.sql</code>\u6587\u4EF6\u81EA\u884C\u5BFC\u5165\u3002</p><p>\u63A5\u7740\u6211\u4EEC\u6765\u7A0D\u5FAE\u5199\u4E00\u70B9\u4E1A\u52A1\uFF0C\u6BD4\u5982\u7528\u6237\u4FE1\u606F\u67E5\u8BE2\u4E1A\u52A1\uFF0C\u6211\u4EEC\u5148\u628A\u6570\u636E\u5E93\u76F8\u5173\u7684\u4F9D\u8D56\u8FDB\u884C\u5BFC\u5165\uFF0C\u8FD9\u91CC\u4F9D\u7136\u4F7F\u7528 Mybatis \u6846\u67B6\uFF0C\u9996\u5148\u5728\u7236\u9879\u76EE\u4E2D\u6DFB\u52A0 MySQL \u9A71\u52A8\u548C Lombok \u4F9D\u8D56\uFF1A</p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">mysql-connector-java</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.projectlombok</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">lombok</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u7531\u4E8E\u4E0D\u662F\u6240\u6709\u7684\u5B50\u9879\u76EE\u90FD\u9700\u8981\u7528\u5230 Mybatis\uFF0C\u6211\u4EEC\u5728\u7236\u9879\u76EE\u4E2D\u53EA\u8FDB\u884C\u7248\u672C\u7BA1\u7406\u5373\u53EF\uFF1A</p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependencyManagement</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.mybatis.spring.boot</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">mybatis-spring-boot-starter</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">2.2.0</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependencyManagement</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6211\u4EEC\u5C31\u53EF\u4EE5\u5728\u7528\u6237\u670D\u52A1\u5B50\u9879\u76EE\u4E2D\u6DFB\u52A0\u6B64\u4F9D\u8D56\u4E86\uFF1A</p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.mybatis.spring.boot</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">mybatis-spring-boot-starter</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6DFB\u52A0\u6570\u636E\u6E90\u4FE1\u606F\uFF08UP \u7528\u5230\u662F\u963F\u91CC\u4E91\u7684 MySQL \u4E91\u6570\u636E\u5E93\uFF0C\u5404\u4F4D\u6CE8\u610F\u4FEE\u6539\u4E00\u4E0B\u6570\u636E\u5E93\u5730\u5740\uFF09\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">spring</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">datasource</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">driver-class-name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">jdbc:mysql://cloudstudy.mysql.cn-chengdu.rds.aliyuncs.com:3306/cloudstudy</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">username</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">password</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123456</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6211\u4EEC\u6765\u5199\u7528\u6237\u67E5\u8BE2\u76F8\u5173\u7684\u4E1A\u52A1\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Data</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> name</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> sex</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Mapper</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserMapper</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Select</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">select * from DB_USER where uid = #{uid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getUserById</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserService</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getUserById</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Service</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserServiceImpl</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserService</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">UserMapper</span><span style="color:#A6ACCD;"> mapper</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getUserById</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> mapper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getUserById</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RestController</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserController</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">UserService</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//\u8FD9\u91CC\u4EE5RESTFul\u98CE\u683C\u4E3A\u4F8B</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/user/{uid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">findUserById</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">PathVariable</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getUserById</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u73B0\u5728\u6211\u4EEC\u8BBF\u95EE\u5373\u53EF\u62FF\u5230\u6570\u636E\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jredurecj213m06s74p.jpg" alt="image-20220323133820304"></p><p>\u540C\u6837\u7684\u65B9\u5F0F\uFF0C\u6211\u4EEC\u5B8C\u6210\u4E00\u4E0B\u56FE\u4E66\u67E5\u8BE2\u4E1A\u52A1\uFF0C\u6CE8\u610F\u73B0\u5728\u662F\u5728\u56FE\u4E66\u7BA1\u7406\u5FAE\u670D\u52A1\u4E2D\u7F16\u5199\uFF08\u522B\u5FD8\u4E86\u5BFC\u5165 Mybatis \u4F9D\u8D56\u4EE5\u53CA\u914D\u7F6E\u6570\u636E\u6E90\uFF09\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Data</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Book</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> bid</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> title</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> desc</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Mapper</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BookMapper</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Select</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">select * from DB_BOOK where bid = #{bid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Book</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getBookById</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> bid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BookService</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Book</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getBookById</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> bid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Service</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BookServiceImpl</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BookService</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">BookMapper</span><span style="color:#A6ACCD;"> mapper</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Book</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getBookById</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> bid</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> mapper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBookById</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">bid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RestController</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BookController</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">BookService</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/book/{bid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Book</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">findBookById</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">PathVariable</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> bid</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBookById</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">bid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u540C\u6837\u8FDB\u884C\u4E00\u4E0B\u6D4B\u8BD5\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jro4g42vj215006sdgg.jpg" alt="image-20220323134742618"></p><p>\u8FD9\u6837\uFF0C\u6211\u4EEC\u4E00\u4E2A\u5B8C\u6574\u9879\u76EE\u7684\u5C31\u62C6\u5206\u6210\u4E86\u591A\u4E2A\u5FAE\u670D\u52A1\uFF0C\u4E0D\u540C\u5FAE\u670D\u52A1\u4E4B\u95F4\u662F\u72EC\u7ACB\u8FDB\u884C\u5F00\u53D1\u548C\u90E8\u7F72\u7684\u3002</p><h3 id="\u670D\u52A1\u95F4\u8C03\u7528" tabindex="-1">\u670D\u52A1\u95F4\u8C03\u7528 <a class="header-anchor" href="#\u670D\u52A1\u95F4\u8C03\u7528" aria-hidden="true">#</a></h3><p>\u524D\u9762\u6211\u4EEC\u5B8C\u6210\u4E86\u7528\u6237\u4FE1\u606F\u67E5\u8BE2\u548C\u56FE\u4E66\u4FE1\u606F\u67E5\u8BE2\uFF0C\u73B0\u5728\u6211\u4EEC\u6765\u63A5\u7740\u5B8C\u6210\u501F\u9605\u670D\u52A1\u3002</p><p>\u501F\u9605\u670D\u52A1\u662F\u4E00\u4E2A\u5173\u8054\u6027\u6BD4\u8F83\u5F3A\u7684\u670D\u52A1\uFF0C\u5B83\u4E0D\u4EC5\u4EC5\u9700\u8981\u67E5\u8BE2\u501F\u9605\u4FE1\u606F\uFF0C\u540C\u65F6\u53EF\u80FD\u8FD8\u9700\u8981\u83B7\u53D6\u501F\u9605\u4FE1\u606F\u4E0B\u7684\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u6BD4\u5982\u5177\u4F53\u90A3\u4E2A\u7528\u6237\u501F\u9605\u4E86\u54EA\u672C\u4E66\uFF0C\u5E76\u4E14\u7528\u6237\u548C\u4E66\u7C4D\u7684\u8BE6\u60C5\u4E5F\u9700\u8981\u540C\u65F6\u51FA\u73B0\uFF0C\u90A3\u4E48\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u5C31\u9700\u8981\u53BB\u8BBF\u95EE\u9664\u4E86\u501F\u9605\u8868\u4EE5\u5916\u7684\u7528\u6237\u8868\u548C\u56FE\u4E66\u8868\u3002</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0js1udjp6j21oa0aw40q.jpg" alt="image-20220323140053749"></p><p>\u4F46\u662F\u8FD9\u663E\u7136\u662F\u8FDD\u53CD\u6211\u4EEC\u4E4B\u524D\u6240\u8BF4\u7684\u5355\u4E00\u804C\u8D23\u7684\uFF0C\u76F8\u540C\u7684\u4E1A\u52A1\u529F\u80FD\u4E0D\u5E94\u8BE5\u91CD\u590D\u51FA\u73B0\uFF0C\u4F46\u662F\u73B0\u5728\u7531\u9700\u8981\u5728\u6B64\u670D\u52A1\u4E2D\u67E5\u8BE2\u7528\u6237\u7684\u4FE1\u606F\u548C\u56FE\u4E66\u4FE1\u606F\uFF0C\u90A3\u600E\u4E48\u529E\u5462\uFF1F\u6211\u4EEC\u53EF\u4EE5\u8BA9\u4E00\u4E2A\u670D\u52A1\u53BB\u8C03\u7528\u53E6\u4E00\u4E2A\u670D\u52A1\u6765\u83B7\u53D6\u4FE1\u606F\u3002</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0js4et40uj21q20agq52.jpg" alt="image-20220323140322502"></p><p>\u8FD9\u6837\uFF0C\u56FE\u4E66\u7BA1\u7406\u5FAE\u670D\u52A1\u548C\u7528\u6237\u7BA1\u7406\u5FAE\u670D\u52A1\u76F8\u5BF9\u4E8E\u501F\u9605\u8BB0\u5F55\uFF0C\u5C31\u5F62\u6210\u4E86\u4E00\u4E2A\u751F\u4EA7\u8005\u548C\u6D88\u8D39\u8005\u7684\u5173\u7CFB\uFF0C\u524D\u8005\u662F\u751F\u4EA7\u8005\uFF0C\u540E\u8005\u4FBF\u662F\u6D88\u8D39\u8005\u3002</p><p>\u73B0\u5728\u6211\u4EEC\u5148\u5C06\u501F\u9605\u5173\u8054\u4FE1\u606F\u67E5\u8BE2\u5B8C\u5584\u4E86\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Data</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Borrow</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> id</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> bid</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Mapper</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowMapper</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Select</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">select * from DB_BORROW where uid = #{uid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Borrow</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getBorrowsByUid</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Select</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">select * from DB_BORROW where bid = #{bid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Borrow</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getBorrowsByBid</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> bid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Select</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">select * from DB_BORROW where bid = #{bid} and uid = #{uid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Borrow</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getBorrow</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> bid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u73B0\u5728\u6709\u4E00\u4E2A\u9700\u6C42\uFF0C\u9700\u8981\u67E5\u8BE2\u7528\u6237\u7684\u501F\u9605\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u4E5F\u5C31\u662F\u8BF4\u9700\u8981\u67E5\u8BE2\u67D0\u4E2A\u7528\u6237\u5177\u4F53\u501F\u4E86\u90A3\u4E9B\u4E66\uFF0C\u5E76\u4E14\u9700\u8981\u6B64\u7528\u6237\u7684\u4FE1\u606F\u548C\u6240\u6709\u5DF2\u501F\u9605\u7684\u4E66\u7C4D\u4FE1\u606F\u4E00\u8D77\u8FD4\u56DE\uFF0C\u90A3\u4E48\u6211\u4EEC\u5148\u6765\u8BBE\u8BA1\u4E00\u4E0B\u8FD4\u56DE\u5B9E\u4F53\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Data</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">AllArgsConstructor</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserBorrowDetail</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> user</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Book</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> bookList</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4F46\u662F\u6709\u4E00\u4E2A\u95EE\u9898\uFF0C\u6211\u4EEC\u53D1\u73B0 User \u548C Book \u5B9E\u4F53\u5B9E\u9645\u4E0A\u662F\u5728\u53E6\u5916\u4E24\u4E2A\u5FAE\u670D\u52A1\u4E2D\u5B9A\u4E49\u7684\uFF0C\u76F8\u5F53\u4E8E\u5F53\u524D\u9879\u76EE\u5E76\u6CA1\u6709\u5B9A\u4E49\u8FD9\u4E9B\u5B9E\u4F53\u7C7B\uFF0C\u90A3\u4E48\u600E\u4E48\u89E3\u51B3\u5462\uFF1F</p><p>\u56E0\u6B64\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u6240\u6709\u670D\u52A1\u9700\u8981\u7528\u5230\u7684\u5B9E\u4F53\u7C7B\u5355\u72EC\u653E\u5165\u53E6\u4E00\u4E2A\u4E00\u4E2A\u9879\u76EE\u4E2D\uFF0C\u7136\u540E\u8BA9\u8FD9\u4E9B\u9879\u76EE\u5F15\u7528\u96C6\u4E2D\u5B58\u653E\u5B9E\u4F53\u7C7B\u7684\u90A3\u4E2A\u9879\u76EE\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u4FDD\u8BC1\u6BCF\u4E2A\u5FAE\u670D\u52A1\u7684\u5B9E\u4F53\u7C7B\u4FE1\u606F\u90FD\u53EF\u4EE5\u5171\u7528\u4E86\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jsl18z1fj221e0bi0w1.jpg" alt="image-20220323141919836"></p><p>\u7136\u540E\u53EA\u9700\u8981\u5728\u5BF9\u5E94\u7684\u7C7B\u4E2D\u5F15\u7528\u6B64\u9879\u76EE\u4F5C\u4E3A\u4F9D\u8D56\u5373\u53EF\uFF1A</p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">com.example</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">commons</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">0.0.1-SNAPSHOT</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u4E4B\u540E\u65B0\u7684\u516C\u5171\u5B9E\u4F53\u7C7B\u90FD\u53EF\u4EE5\u5728<code>commons</code>\u9879\u76EE\u4E2D\u8FDB\u884C\u5B9A\u4E49\u4E86\uFF0C\u73B0\u5728\u6211\u4EEC\u63A5\u7740\u6765\u5B8C\u6210\u521A\u521A\u7684\u9700\u6C42\uFF0C\u5148\u5B9A\u4E49\u63A5\u53E3\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowService</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">UserBorrowDetail</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getUserBorrowDetailByUid</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Service</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowServiceImpl</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowService</span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">BorrowMapper</span><span style="color:#A6ACCD;"> mapper</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">UserBorrowDetail</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getUserBorrowDetailByUid</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Borrow</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> borrow </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mapper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBorrowsByUid</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//\u90A3\u4E48\u95EE\u9898\u6765\u4E86\uFF0C\u73B0\u5728\u62FF\u5230\u501F\u9605\u5173\u8054\u4FE1\u606F\u4E86\uFF0C\u600E\u4E48\u8C03\u7528\u5176\u4ED6\u670D\u52A1\u83B7\u53D6\u4FE1\u606F\u5462\uFF1F</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u9700\u8981\u8FDB\u884C\u670D\u52A1\u8FDC\u7A0B\u8C03\u7528\u6211\u4EEC\u9700\u8981\u7528\u5230<code>RestTemplate</code>\u6765\u8FDB\u884C\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Service</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowServiceImpl</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowService</span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">BorrowMapper</span><span style="color:#A6ACCD;"> mapper</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">UserBorrowDetail</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getUserBorrowDetailByUid</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Borrow</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> borrow </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mapper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBorrowsByUid</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//RestTemplate\u652F\u6301\u591A\u79CD\u65B9\u5F0F\u7684\u8FDC\u7A0B\u8C03\u7528</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">RestTemplate</span><span style="color:#A6ACCD;"> template </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">RestTemplate</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//\u8FD9\u91CC\u901A\u8FC7\u8C03\u7528getForObject\u6765\u8BF7\u6C42\u5176\u4ED6\u670D\u52A1\uFF0C\u5E76\u5C06\u7ED3\u679C\u81EA\u52A8\u8FDB\u884C\u5C01\u88C5</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//\u83B7\u53D6User\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> template</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForObject</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:8082/user/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> User</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//\u83B7\u53D6\u6BCF\u4E00\u672C\u4E66\u7684\u8BE6\u7EC6\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Book</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> bookList </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> borrow</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stream</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">b </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> template</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForObject</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:8080/book/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBid</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> Book</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">collect</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Collectors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toList</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">UserBorrowDetail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> bookList</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u73B0\u5728\u6211\u4EEC\u518D\u6700\u540E\u5B8C\u5584\u4E00\u4E0B Controller\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RestController</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowController</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">BorrowService</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/borrow/{uid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">UserBorrowDetail</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">findUserBorrows</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">PathVariable</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getUserBorrowDetailByUid</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5728\u6570\u636E\u5E93\u4E2D\u6DFB\u52A0\u4E00\u70B9\u501F\u9605\u4FE1\u606F\uFF0C\u6D4B\u8BD5\u770B\u770B\u80FD\u4E0D\u80FD\u6B63\u5E38\u83B7\u53D6\uFF08\u6CE8\u610F\u4E00\u5B9A\u8981\u4FDD\u8BC1\u4E09\u4E2A\u670D\u52A1\u90FD\u5904\u4E8E\u5F00\u542F\u72B6\u6001\uFF0C\u5426\u5219\u8FDC\u7A0B\u8C03\u7528\u4F1A\u5931\u8D25\uFF09\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jt4ccuywj226i06wdh5.jpg" alt="image-20220323143753567"></p><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u7ED3\u679C\u6B63\u5E38\uFF0C\u6CA1\u6709\u95EE\u9898\uFF0C\u8FDC\u7A0B\u8C03\u7528\u6210\u529F\u3002</p><p>\u8FD9\u6837\uFF0C\u4E00\u4E2A\u7B80\u6613\u7684\u56FE\u4E66\u7BA1\u7406\u7CFB\u7EDF\u7684\u5206\u5E03\u5F0F\u9879\u76EE\u5C31\u642D\u5EFA\u5B8C\u6210\u4E86\uFF0C<strong>\u8FD9\u91CC\u8BB0\u5F97\u628A\u6574\u4E2A\u9879\u76EE\u538B\u7F29\u6253\u5305\u5907\u4EFD\u4E00\u4E0B</strong>\uFF0C\u4E0B\u4E00\u7AE0\u5B66\u4E60 SpringCloud Alibaba \u4E5F\u9700\u8981\u8FDB\u884C\u914D\u7F6E\u3002</p><h3 id="\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0" tabindex="-1">\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0 <a class="header-anchor" href="#\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0" aria-hidden="true">#</a></h3><p>\u524D\u9762\u6211\u4EEC\u4E86\u89E3\u4E86\u5982\u4F55\u5BF9\u5355\u4F53\u5E94\u7528\u8FDB\u884C\u62C6\u5206\uFF0C\u5E76\u4E14\u4E5F\u5B66\u4E60\u4E86\u5982\u4F55\u8FDB\u884C\u670D\u52A1\u4E4B\u95F4\u7684\u76F8\u4E92\u8C03\u7528\uFF0C\u4F46\u662F\u5B58\u5728\u4E00\u4E2A\u95EE\u9898\uFF0C\u5C31\u662F\u867D\u7136\u670D\u52A1\u62C6\u5206\u5B8C\u6210\uFF0C\u4F46\u662F\u6CA1\u6709\u4E00\u4E2A\u6BD4\u8F83\u5408\u7406\u7684\u7BA1\u7406\u673A\u5236\uFF0C\u5982\u679C\u5355\u7EAF\u53EA\u662F\u8FD9\u6837\u7F16\u5199\uFF0C\u5728\u90E8\u7F72\u548C\u7EF4\u62A4\u8D77\u6765\uFF0C\u80AF\u5B9A\u662F\u5F88\u9EBB\u70E6\u7684\u3002\u53EF\u4EE5\u60F3\u8C61\u4E00\u4E0B\uFF0C\u5982\u679C\u67D0\u4E00\u5929\u8FD9\u4E9B\u5FAE\u670D\u52A1\u7684\u7AEF\u53E3\u6216\u662F\u5730\u5740\u5927\u89C4\u6A21\u5730\u53D1\u751F\u6539\u53D8\uFF0C\u6211\u4EEC\u5C31\u4E0D\u5F97\u4E0D\u5C06\u670D\u52A1\u4E4B\u95F4\u7684\u8C03\u7528\u8DEF\u5F84\u5927\u89C4\u6A21\u7684\u540C\u6B65\u8FDB\u884C\u4FEE\u6539\uFF0C\u8FD9\u662F\u591A\u4E48\u53EF\u6015\u7684\u4E8B\u60C5\u3002\u6211\u4EEC\u9700\u8981\u524A\u5F31\u8FD9\u79CD\u670D\u52A1\u4E4B\u95F4\u7684\u5F3A\u5173\u8054\u6027\uFF0C\u56E0\u6B64\u6211\u4EEC\u9700\u8981\u4E00\u4E2A\u96C6\u4E2D\u7BA1\u7406\u5FAE\u670D\u52A1\u7684\u5E73\u53F0\uFF0C\u8FD9\u65F6\u5C31\u8981\u501F\u52A9\u6211\u4EEC\u8FD9\u4E00\u90E8\u5206\u7684\u4E3B\u89D2\u4E86\u3002</p><p>Eureka \u80FD\u591F\u81EA\u52A8\u6CE8\u518C\u5E76\u53D1\u73B0\u5FAE\u670D\u52A1\uFF0C\u7136\u540E\u5BF9\u670D\u52A1\u7684\u72B6\u6001\u3001\u4FE1\u606F\u8FDB\u884C\u96C6\u4E2D\u7BA1\u7406\uFF0C\u8FD9\u6837\u5F53\u6211\u4EEC\u9700\u8981\u83B7\u53D6\u5176\u4ED6\u670D\u52A1\u7684\u4FE1\u606F\u65F6\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u5411 Eureka \u8FDB\u884C\u67E5\u8BE2\u5C31\u53EF\u4EE5\u4E86\u3002</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jthur4u0j21lu0dytam.jpg" alt="image-20220323145051821"></p><p>\u50CF\u8FD9\u6837\u7684\u8BDD\uFF0C\u670D\u52A1\u4E4B\u95F4\u7684\u5F3A\u5173\u8054\u6027\u5C31\u4F1A\u88AB\u8FDB\u4E00\u6B65\u524A\u5F31\u3002</p><p>\u90A3\u4E48\u73B0\u5728\u6211\u4EEC\u5C31\u6765\u642D\u5EFA\u4E00\u4E2A Eureka \u670D\u52A1\u5668\uFF0C\u53EA\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684 Maven \u9879\u76EE\u5373\u53EF\uFF0C\u7136\u540E\u6211\u4EEC\u9700\u8981\u5728\u7236\u5DE5\u7A0B\u4E2D\u6DFB\u52A0\u4E00\u4E0B SpringCloud \u7684\u4F9D\u8D56\uFF0C\u8FD9\u91CC\u9009\u7528<code>2021.0.1</code>\u7248\u672C\uFF08Spring Cloud \u6700\u65B0\u7684\u7248\u672C\u547D\u540D\u65B9\u5F0F\u53D8\u66F4\u4E86\uFF0C\u73B0\u5728\u662F <strong><em>YEAR.x</em></strong> \u8FD9\u79CD\u547D\u540D\u65B9\u5F0F\uFF0C\u5177\u4F53\u53EF\u4EE5\u5728\u5B98\u7F51\u67E5\u770B\uFF1A<a href="https://spring.io/projects/spring-cloud#learn%EF%BC%89%EF%BC%9A" target="_blank" rel="noopener noreferrer">https://spring.io/projects/spring-cloud#learn\uFF09\uFF1A</a></p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.cloud</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-cloud-dependencies</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">2021.0.1</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">pom</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">scope</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">import</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">scope</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6211\u4EEC\u4E3A\u65B0\u521B\u5EFA\u7684\u9879\u76EE\u6DFB\u52A0\u4F9D\u8D56\uFF1A</p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.cloud</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-cloud-starter-netflix-eureka-server</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u4E0B\u8F7D\u5185\u5BB9\u6709\u70B9\u591A\uFF0C\u9996\u6B21\u5BFC\u5165\u8BF7\u8010\u5FC3\u7B49\u5F85\u4E00\u4E0B\u3002</p><p>\u63A5\u7740\u6211\u4EEC\u6765\u521B\u5EFA\u4E3B\u7C7B\uFF0C\u8FD8\u662F\u4E00\u6837\u7684\u64CD\u4F5C\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">EnableEurekaServer</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">SpringBootApplication</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EurekaServerApplication</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        SpringApplication</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">EurekaServerApplication</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> args</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u522B\u7740\u6025\u542F\u52A8\uFF01\uFF01\uFF01\u63A5\u7740\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u4E00\u4E0B\u914D\u7F6E\u6587\u4EF6\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8888</span></span>
<span class="line"><span style="color:#F07178;">eureka</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># \u5F00\u542F\u4E4B\u524D\u9700\u8981\u4FEE\u6539\u4E00\u4E0B\u5BA2\u6237\u7AEF\u8BBE\u7F6E\uFF08\u867D\u7136\u662F\u670D\u52A1\u7AEF</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">client</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">  	</span><span style="color:#676E95;font-style:italic;"># \u7531\u4E8E\u6211\u4EEC\u662F\u4F5C\u4E3A\u670D\u52A1\u7AEF\u89D2\u8272\uFF0C\u6240\u4EE5\u4E0D\u9700\u8981\u83B7\u53D6\u670D\u52A1\u7AEF\uFF0C\u6539\u4E3Afalse\uFF0C\u9ED8\u8BA4\u4E3Atrue</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#F07178;">fetch-registry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;"># \u6682\u65F6\u4E0D\u9700\u8981\u5C06\u81EA\u5DF1\u4E5F\u6CE8\u518C\u5230Eureka</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">register-with-eureka</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># \u5C06eureka\u670D\u52A1\u7AEF\u6307\u5411\u81EA\u5DF1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">service-url</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">defaultZone</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:8888/eureka</span></span>
<span class="line"></span></code></pre></div><p>\u597D\u4E86\uFF0C\u73B0\u5728\u5DEE\u4E0D\u591A\u53EF\u4EE5\u542F\u52A8\u4E86\uFF0C\u542F\u52A8\u5B8C\u6210\u540E\uFF0C\u76F4\u63A5\u8F93\u5165\u5730\u5740+\u7AEF\u53E3\u5373\u53EF\u8BBF\u95EE Eureka \u7684\u7BA1\u7406\u540E\u53F0\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jui0bzpvj21l60u0wi1.jpg" alt="image-20220323152537322"></p><p>\u53EF\u4EE5\u770B\u5230\u76EE\u524D\u8FD8\u6CA1\u6709\u4EFB\u4F55\u7684\u670D\u52A1\u6CE8\u518C\u5230 Eureka\uFF0C\u6211\u4EEC\u63A5\u7740\u6765\u914D\u7F6E\u4E00\u4E0B\u6211\u4EEC\u7684\u4E09\u4E2A\u5FAE\u670D\u52A1\uFF0C\u9996\u5148\u8FD8\u662F\u9700\u8981\u5BFC\u5165 Eureka \u4F9D\u8D56\uFF08\u6CE8\u610F\u522B\u5BFC\u9519\u4E86\uFF0C\u540D\u79F0\u91CC\u9762\u6709\u4E2A starter \u7684\u624D\u662F\uFF09\uFF1A</p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.cloud</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-cloud-starter-netflix-eureka-client</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u540E\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">eureka</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">client</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">  	</span><span style="color:#676E95;font-style:italic;"># \u8DDF\u4E0A\u9762\u4E00\u6837\uFF0C\u9700\u8981\u6307\u5411Eureka\u670D\u52A1\u7AEF\u5730\u5740\uFF0C\u8FD9\u6837\u624D\u80FD\u8FDB\u884C\u6CE8\u518C</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">service-url</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">defaultZone</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:8888/eureka</span></span>
<span class="line"></span></code></pre></div><p>OK\uFF0C\u65E0\u9700\u5728\u542F\u52A8\u7C7B\u6DFB\u52A0\u6CE8\u89E3\uFF0C\u76F4\u63A5\u542F\u52A8\u5C31\u53EF\u4EE5\u4E86\uFF0C\u7136\u540E\u6253\u5F00 Eureka \u7684\u670D\u52A1\u7BA1\u7406\u9875\u9762\uFF0C\u53EF\u4EE5\u770B\u5230\u6211\u4EEC\u521A\u521A\u5F00\u542F\u7684\u670D\u52A1\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jv4mtugqj22lm0ec40f.jpg" alt="image-20220323154722373"></p><p>\u53EF\u4EE5\u770B\u5230<code>8082</code>\u7AEF\u53E3\u4E0A\u7684\u670D\u52A1\u5668\uFF0C\u5DF2\u7ECF\u6210\u529F\u6CE8\u518C\u5230 Eureka \u4E86\uFF0C\u4F46\u662F\u8FD9\u4E2A\u670D\u52A1\u540D\u79F0\u600E\u4E48\u4F1A\u663E\u793A\u4E3A UNKNOWN\uFF0C\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u4E00\u4E0B\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">spring</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">application</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">userservice</span></span>
<span class="line"></span></code></pre></div><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jval83b7j22ls0c60ul.jpg" alt="image-20220323155305545"></p><p>\u5F53\u6211\u4EEC\u7684\u670D\u52A1\u542F\u52A8\u4E4B\u540E\uFF0C\u4F1A\u6BCF\u9694\u4E00\u6BB5\u65F6\u95F4\u8DDF Eureka \u53D1\u9001\u4E00\u6B21\u5FC3\u8DF3\u5305\uFF0C\u8FD9\u6837 Eureka \u5C31\u80FD\u591F\u611F\u77E5\u5230\u6211\u4EEC\u7684\u670D\u52A1\u662F\u5426\u5904\u4E8E\u6B63\u5E38\u8FD0\u884C\u72B6\u6001\u3002</p><p>\u73B0\u5728\u6211\u4EEC\u7528\u540C\u6837\u7684\u65B9\u6CD5\uFF0C\u5C06\u53E6\u5916\u4E24\u4E2A\u5FAE\u670D\u52A1\u4E5F\u6CE8\u518C\u8FDB\u6765\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jvhkpma7j22m80c2mzo.jpg" alt="image-20220323155948425"></p><p>\u90A3\u4E48\uFF0C\u73B0\u5728\u6211\u4EEC\u600E\u4E48\u5B9E\u73B0\u670D\u52A1\u53D1\u73B0\u5462\uFF1F</p><p>\u4E5F\u5C31\u662F\u8BF4\uFF0C\u6211\u4EEC\u4E4B\u524D\u5982\u679C\u9700\u8981\u5BF9\u5176\u4ED6\u5FAE\u670D\u52A1\u8FDB\u884C\u8FDC\u7A0B\u8C03\u7528\uFF0C\u90A3\u4E48\u5C31\u5FC5\u987B\u8981\u77E5\u9053\u5176\u4ED6\u670D\u52A1\u7684\u5730\u5740\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> template</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForObject</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:8082/user/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> User</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><p>\u800C\u73B0\u5728\u6709\u4E86 Eureka \u4E4B\u540E\uFF0C\u6211\u4EEC\u53EF\u4EE5\u76F4\u63A5\u5411\u5176\u8FDB\u884C\u67E5\u8BE2\uFF0C\u5F97\u5230\u5BF9\u5E94\u7684\u5FAE\u670D\u52A1\u5730\u5740\uFF0C\u8FD9\u91CC\u76F4\u63A5\u5C06\u670D\u52A1\u540D\u79F0\u66FF\u6362\u5373\u53EF\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Service</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowServiceImpl</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowService</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">BorrowMapper</span><span style="color:#A6ACCD;"> mapper</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">RestTemplate</span><span style="color:#A6ACCD;"> template</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">UserBorrowDetail</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getUserBorrowDetailByUid</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Borrow</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> borrow </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mapper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBorrowsByUid</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//\u8FD9\u91CC\u4E0D\u7528\u518D\u5199IP\uFF0C\u76F4\u63A5\u5199\u670D\u52A1\u540D\u79F0userservice</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> template</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForObject</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://userservice/user/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> User</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//\u8FD9\u91CC\u4E0D\u7528\u518D\u5199IP\uFF0C\u76F4\u63A5\u5199\u670D\u52A1\u540D\u79F0bookservice</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Book</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> bookList </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> borrow</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stream</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">b </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> template</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForObject</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://bookservice/book/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBid</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> Book</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">collect</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Collectors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toList</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">UserBorrowDetail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> bookList</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6211\u4EEC\u624B\u52A8\u5C06 RestTemplate \u58F0\u660E\u4E3A\u4E00\u4E2A Bean\uFF0C\u7136\u540E\u6DFB\u52A0<code>@LoadBalanced</code>\u6CE8\u89E3\uFF0C\u8FD9\u6837 Eureka \u5C31\u4F1A\u5BF9\u670D\u52A1\u7684\u8C03\u7528\u8FDB\u884C\u81EA\u52A8\u53D1\u73B0\uFF0C\u5E76\u63D0\u4F9B\u8D1F\u8F7D\u5747\u8861\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Configuration</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BeanConfig</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Bean</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">LoadBalanced</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">RestTemplate</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">template</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">RestTemplate</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u73B0\u5728\u6211\u4EEC\u5C31\u53EF\u4EE5\u6B63\u5E38\u8C03\u7528\u4E86\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jw0nxoykj22720bqjsw.jpg" alt="image-20220323161809122"></p><p>\u4E0D\u5BF9\u554A\uFF0C\u4E0D\u662F\u8BF4\u6709\u8D1F\u8F7D\u5747\u8861\u7684\u80FD\u529B\u5417\uFF0C\u600E\u4E48\u4E2A\u8D1F\u8F7D\u5747\u8861\u5462\uFF1F</p><p>\u6211\u4EEC\u5148\u6765\u770B\u770B\uFF0C\u540C\u4E00\u4E2A\u670D\u52A1\u5668\u5B9E\u9645\u4E0A\u662F\u53EF\u4EE5\u6CE8\u518C\u5F88\u591A\u4E2A\u7684\uFF0C\u4F46\u662F\u5B83\u4EEC\u7684\u7AEF\u53E3\u4E0D\u540C\uFF0C\u6BD4\u5982\u6211\u4EEC\u8FD9\u91CC\u521B\u5EFA\u591A\u4E2A\u7528\u6237\u67E5\u8BE2\u670D\u52A1\uFF0C\u6211\u4EEC\u73B0\u5728\u5C06\u539F\u6709\u7684\u7AEF\u53E3\u914D\u7F6E\u4FEE\u6539\u4E00\u4E0B\uFF0C\u7531 IDEA \u4E2D\u8BBE\u5B9A\u542F\u52A8\u53C2\u6570\u6765\u51B3\u5B9A\uFF0C\u8FD9\u6837\u5C31\u53EF\u4EE5\u591A\u521B\u5EFA\u51E0\u4E2A\u4E0D\u540C\u7AEF\u53E3\u7684\u542F\u52A8\u9879\u4E86\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jwbxq00pj21ue0rcgqf.jpg" alt="image-20220323162858616"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jwch1eb2j21ng08ead5.jpg" alt="image-20220323162926482"></p><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u5728 Eureka \u4E2D\uFF0C\u540C\u4E00\u4E2A\u670D\u52A1\u51FA\u73B0\u4E86\u4E24\u4E2A\u5B9E\u4F8B\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jwd5r9bgj21w00c8mz4.jpg" alt="image-20220323163010052"></p><p>\u73B0\u5728\u6211\u4EEC\u7A0D\u5FAE\u4FEE\u6539\u4E00\u4E0B\u7528\u6237\u67E5\u8BE2\uFF0C\u7136\u540E\u8FDB\u884C\u8FDC\u7A0B\u8C03\u7528\uFF0C\u770B\u770B\u8BF7\u6C42\u662F\u4E0D\u662F\u5747\u5300\u5730\u5206\u914D\u5230\u8FD9\u4E24\u4E2A\u670D\u52A1\u7AEF\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RestController</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserController</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">UserService</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/user/{uid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">findUserById</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">PathVariable</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u6211\u88AB\u8C03\u7528\u62C9\uFF01</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getUserById</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jwgqas0qj22ci0batb0.jpg" alt="image-20220323163335257"></p><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u4E24\u4E2A\u5B9E\u4F8B\u90FD\u80FD\u591F\u5747\u5300\u5730\u88AB\u5206\u914D\u8BF7\u6C42\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jwi0a3yhj21tk0gqq9l.jpg" alt="image-20220323163448765"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24egy1h0jwi5kezyj21me0hmq83.jpg" alt="image-20220323163457877"></p><p>\u8FD9\u6837\uFF0C\u670D\u52A1\u81EA\u52A8\u53D1\u73B0\u4EE5\u53CA\u7B80\u5355\u7684\u8D1F\u8F7D\u5747\u8861\u5C31\u5B9E\u73B0\u5B8C\u6210\u4E86\uFF0C\u5E76\u4E14\uFF0C\u5982\u679C\u67D0\u4E2A\u5FAE\u670D\u52A1\u6302\u6389\u4E86\uFF0C\u53EA\u8981\u5B58\u5728\u5176\u4ED6\u540C\u6837\u7684\u5FAE\u670D\u52A1\u5B9E\u4F8B\u5728\u8FD0\u884C\uFF0C\u90A3\u4E48\u5C31\u4E0D\u4F1A\u5BFC\u81F4\u6574\u4E2A\u5FAE\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u6781\u5927\u5730\u4FDD\u8BC1\u4E86\u5B89\u5168\u6027\u3002</p><h3 id="\u6CE8\u518C\u4E2D\u5FC3\u9AD8\u53EF\u7528" tabindex="-1">\u6CE8\u518C\u4E2D\u5FC3\u9AD8\u53EF\u7528 <a class="header-anchor" href="#\u6CE8\u518C\u4E2D\u5FC3\u9AD8\u53EF\u7528" aria-hidden="true">#</a></h3><p>\u5404\u4F4D\u53EF\u5426\u60F3\u8FC7\u8FD9\u6837\u7684\u4E00\u4E2A\u95EE\u9898\uFF1F\u867D\u7136 Eureka \u80FD\u591F\u5B9E\u73B0\u670D\u52A1\u6CE8\u518C\u548C\u53D1\u73B0\uFF0C\u4F46\u662F\u5982\u679C Eureka \u670D\u52A1\u5668\u5D29\u6E83\u4E86\uFF0C\u5C82\u4E0D\u662F\u6240\u6709\u9700\u8981\u7528\u5230\u670D\u52A1\u53D1\u73B0\u7684\u5FAE\u670D\u52A1\u5C31 GG \u4E86\uFF1F</p><p>\u4E3A\u4E86\u907F\u514D\uFF0C\u8FD9\u79CD\u95EE\u9898\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u50CF\u4E0A\u9762\u90A3\u6837\uFF0C\u642D\u5EFA Eureka \u96C6\u7FA4\uFF0C\u5B58\u5728\u591A\u4E2A Eureka \u670D\u52A1\u5668\uFF0C\u8FD9\u6837\u5C31\u7B97\u6302\u6389\u5176\u4E2D\u4E00\u4E2A\uFF0C\u5176\u4ED6\u7684\u4E5F\u8FD8\u5728\u6B63\u5E38\u8FD0\u884C\uFF0C\u5C31\u4E0D\u4F1A\u4F7F\u5F97\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\u4E0D\u53EF\u7528\u3002\u5F53\u7136\uFF0C\u8981\u662F\u7269\u7406\u9ED1\u5BA2\u76F4\u63A5\u70B8\u4E86\u6574\u4E2A\u673A\u623F\uFF0C\u90A3\u8FD8\u662F\u7B97\u4E86\u5427\u3002</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0k41ady28j21jy0iwmzt.jpg" alt="image-20220323205531185"></p><p>\u6211\u4EEC\u6765\u770B\u770B\u5982\u4F55\u642D\u5EFA Eureka \u96C6\u7FA4\uFF0C\u8FD9\u91CC\u7531\u4E8E\u673A\u5668\u914D\u7F6E\u4E0D\u9AD8\uFF0C\u5C31\u642D\u5EFA\u4E24\u4E2A Eureka \u670D\u52A1\u5668\u7EC4\u6210\u96C6\u7FA4\u3002</p><p>\u9996\u5148\u6211\u4EEC\u9700\u8981\u4FEE\u6539\u4E00\u4E0B Eureka \u670D\u52A1\u7AEF\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u8FD9\u91CC\u6211\u4EEC\u521B\u5EFA\u4E24\u4E2A\u914D\u7F6E\u6587\u4EF6\uFF0C\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8801</span></span>
<span class="line"><span style="color:#F07178;">spring</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">application</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eurekaserver</span></span>
<span class="line"><span style="color:#F07178;">eureka</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">instance</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">  	</span><span style="color:#676E95;font-style:italic;"># \u7531\u4E8E\u4E0D\u652F\u6301\u591A\u4E2Alocalhost\u7684Eureka\u670D\u52A1\u5668\uFF0C\u4F46\u662F\u53C8\u53EA\u6709\u672C\u5730\u6D4B\u8BD5\u73AF\u5883\uFF0C\u6240\u4EE5\u5C31\u53EA\u80FD\u81EA\u5B9A\u4E49\u4E3B\u673A\u540D\u79F0\u4E86</span></span>
<span class="line"><span style="color:#89DDFF;">  	</span><span style="color:#676E95;font-style:italic;"># \u4E3B\u673A\u540D\u79F0\u6539\u4E3Aeureka01</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">hostname</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eureka01</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">client</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">fetch-registry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># \u53BB\u6389register-with-eureka\u9009\u9879\uFF0C\u8BA9Eureka\u670D\u52A1\u5668\u81EA\u5DF1\u6CE8\u518C\u5230\u5176\u4ED6Eureka\u670D\u52A1\u5668\uFF0C\u8FD9\u6837\u624D\u80FD\u76F8\u4E92\u542F\u7528</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">service-url</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    	</span><span style="color:#676E95;font-style:italic;"># \u6CE8\u610F\u8FD9\u91CC\u586B\u5199\u5176\u4ED6Eureka\u670D\u52A1\u5668\u7684\u5730\u5740\uFF0C\u4E0D\u7528\u5199\u81EA\u5DF1\u7684</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">defaultZone</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://eureka01:8801/eureka</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8802</span></span>
<span class="line"><span style="color:#F07178;">spring</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">application</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eurekaserver</span></span>
<span class="line"><span style="color:#F07178;">eureka</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">instance</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">hostname</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">eureka02</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">client</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">fetch-registry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">service-url</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">defaultZone</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://eureka01:8801/eureka</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u91CC\u7531\u4E8E\u6211\u4EEC\u4FEE\u6539\u6210\u81EA\u5B9A\u4E49\u7684\u5730\u5740\uFF0C\u9700\u8981\u5728 hosts \u6587\u4EF6\u4E2D\u5C06\u5176\u89E3\u6790\u5230 172.0.0.1 \u624D\u80FD\u56DE\u5230 localhost\uFF0CMac \u4E0B\u6587\u4EF6\u8DEF\u5F84\u4E3A<code>/etc/hosts</code>\uFF0CWindows \u4E0B\u4E3A<code>C:\\Windows\\system32\\drivers\\etc\\hosts</code>\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0k48bkgyoj212q07a0te.jpg" alt="image-20220323210218653"></p><p>\u5BF9\u521B\u5EFA\u7684\u4E24\u4E2A\u914D\u7F6E\u6587\u4EF6\u5206\u522B\u6DFB\u52A0\u542F\u52A8\u914D\u7F6E\uFF0C\u76F4\u63A5\u4F7F\u7528<code>spring.profiles.active</code>\u6307\u5B9A\u542F\u7528\u7684\u914D\u7F6E\u6587\u4EF6\u5373\u53EF\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0k4u09lpxj22aw0py0y5.jpg" alt="image-20220323212308857"></p><p>\u63A5\u7740\u542F\u52A8\u8FD9\u4E24\u4E2A\u6CE8\u518C\u4E2D\u5FC3\uFF0C\u8FD9\u4E24\u4E2A Eureka \u7BA1\u7406\u9875\u9762\u90FD\u53EF\u4EE5\u88AB\u8BBF\u95EE\uFF0C\u6211\u4EEC\u8BBF\u95EE\u5176\u4E2D\u4E00\u4E2A\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0k4fxnlxtj21yk0cytao.jpg" alt="image-20220323210937341"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0k4chvjv8j21rq07it9k.jpg" alt="image-20220323210619533"></p><p>\u53EF\u4EE5\u770B\u5230\u4E0B\u65B9<code>replicas</code>\u4E2D\u5DF2\u7ECF\u5305\u542B\u4E86\u53E6\u4E00\u4E2A Eureka \u670D\u52A1\u5668\u7684\u5730\u5740\uFF0C\u5E76\u4E14\u662F\u53EF\u7528\u72B6\u6001\u3002</p><p>\u63A5\u7740\u6211\u4EEC\u9700\u8981\u5C06\u6211\u4EEC\u7684\u5FAE\u670D\u52A1\u914D\u7F6E\u4E5F\u8FDB\u884C\u4FEE\u6539\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">eureka</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">client</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">service-url</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    	</span><span style="color:#676E95;font-style:italic;"># \u5C06\u4E24\u4E2AEureka\u7684\u5730\u5740\u90FD\u52A0\u5165\uFF0C\u8FD9\u6837\u5C31\u7B97\u6709\u4E00\u4E2AEureka\u6302\u6389\uFF0C\u4E5F\u80FD\u5B8C\u6210\u6CE8\u518C</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">defaultZone</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:8801/eureka, http://localhost:8802/eureka</span></span>
<span class="line"></span></code></pre></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u670D\u52A1\u5168\u90E8\u6210\u529F\u6CE8\u518C\uFF0C\u5E76\u4E14\u4E24\u4E2A Eureka \u670D\u52A1\u7AEF\u90FD\u663E\u793A\u4E3A\u5DF2\u6CE8\u518C\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0k4gvpxdtj21vc0dm41j.jpg" alt="image-20220323211032311"></p><p>\u63A5\u7740\u6211\u4EEC\u6A21\u62DF\u4E00\u4E0B\uFF0C\u5C06\u5176\u4E2D\u4E00\u4E2A Eureka \u670D\u52A1\u5668\u5173\u95ED\u6389\uFF0C\u53EF\u4EE5\u770B\u5230\u5B83\u4F1A\u76F4\u63A5\u53D8\u6210\u4E0D\u53EF\u7528\u72B6\u6001\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0k4ke207fj21rm06w75k.jpg" alt="image-20220323211354516"></p><p>\u5F53\u7136\uFF0C\u5982\u679C\u8FD9\u4E2A\u65F6\u5019\u6211\u4EEC\u91CD\u542F\u521A\u521A\u5173\u95ED\u7684 Eureka \u670D\u52A1\u5668\uFF0C\u4F1A\u81EA\u52A8\u540C\u6B65\u5176\u4ED6 Eureka \u670D\u52A1\u5668\u7684\u6570\u636E\u3002</p><hr><h2 id="loadbalancer-\u8D1F\u8F7D\u5747\u8861" tabindex="-1">LoadBalancer \u8D1F\u8F7D\u5747\u8861 <a class="header-anchor" href="#loadbalancer-\u8D1F\u8F7D\u5747\u8861" aria-hidden="true">#</a></h2><p>\u524D\u9762\u6211\u4EEC\u8BB2\u89E3\u4E86\u5982\u4F55\u5BF9\u670D\u52A1\u8FDB\u884C\u62C6\u5206\u3001\u5982\u4F55\u901A\u8FC7 Eureka \u670D\u52A1\u5668\u8FDB\u884C\u670D\u52A1\u6CE8\u518C\u4E0E\u53D1\u73B0\uFF0C\u90A3\u4E48\u73B0\u5728\u6211\u4EEC\u6765\u770B\u770B\uFF0C\u5B83\u7684\u8D1F\u8F7D\u5747\u8861\u5230\u5E95\u662F\u5982\u4F55\u5B9E\u73B0\u7684\uFF0C\u5B9E\u9645\u4E0A\u4E4B\u524D\u6F14\u793A\u7684\u8D1F\u8F7D\u5747\u8861\u662F\u4F9D\u9760 LoadBalancer \u5B9E\u73B0\u7684\u3002</p><p>\u5728 2020 \u5E74\u524D\u7684 SpringCloud \u7248\u672C\u662F\u91C7\u7528 Ribbon \u4F5C\u4E3A\u8D1F\u8F7D\u5747\u8861\u5B9E\u73B0\uFF0C\u4F46\u662F 2020 \u5E74\u7684\u7248\u672C\u4E4B\u540E SpringCloud \u628A Ribbon \u79FB\u9664\u4E86\uFF0C\u8FDB\u800C\u7528\u81EA\u5DF1\u7F16\u5199\u7684 LoadBalancer \u66FF\u4EE3\u3002</p><p>\u90A3\u4E48\uFF0C\u8D1F\u8F7D\u5747\u8861\u662F\u5982\u4F55\u8FDB\u884C\u7684\u5462\uFF1F</p><h3 id="\u8D1F\u8F7D\u5747\u8861" tabindex="-1">\u8D1F\u8F7D\u5747\u8861 <a class="header-anchor" href="#\u8D1F\u8F7D\u5747\u8861" aria-hidden="true">#</a></h3><p>\u5B9E\u9645\u4E0A\uFF0C\u5728\u6DFB\u52A0<code>@LoadBalanced</code>\u6CE8\u89E3\u4E4B\u540E\uFF0C\u4F1A\u542F\u7528\u62E6\u622A\u5668\u5BF9\u6211\u4EEC\u53D1\u8D77\u7684\u670D\u52A1\u8C03\u7528\u8BF7\u6C42\u8FDB\u884C\u62E6\u622A\uFF08\u6CE8\u610F\u8FD9\u91CC\u662F\u9488\u5BF9\u6211\u4EEC\u53D1\u8D77\u7684\u8BF7\u6C42\u8FDB\u884C\u62E6\u622A\uFF09\uFF0C\u53EB\u505A<code>LoadBalancerInterceptor</code>\uFF0C\u5B83\u5B9E\u73B0<code>ClientHttpRequestInterceptor</code>\u63A5\u53E3\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">FunctionalInterface</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ClientHttpRequestInterceptor</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">ClientHttpResponse</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">intercept</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">HttpRequest</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">byte</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> body</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">ClientHttpRequestExecution</span><span style="color:#A6ACCD;"> execution</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">throws</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">IOException</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u4E3B\u8981\u662F\u5BF9<code>intercept</code>\u65B9\u6CD5\u7684\u5B9E\u73B0\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">ClientHttpResponse</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">intercept</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">HttpRequest</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">byte</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> body</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">final</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">ClientHttpRequestExecution</span><span style="color:#A6ACCD;"> execution</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> throws IOException </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">URI</span><span style="color:#A6ACCD;"> originalUri </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getURI</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> serviceName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> originalUri</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getHost</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    Assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">state</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">serviceName </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Request URI does not contain a valid hostname: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> originalUri</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ClientHttpResponse</span><span style="color:#89DDFF;">)this.</span><span style="color:#A6ACCD;">loadBalancer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">serviceName</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">requestFactory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createRequest</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> body</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> execution</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u53EF\u4EE5\u6253\u4E2A\u65AD\u70B9\u770B\u770B\u5B9E\u9645\u662F\u600E\u4E48\u5728\u6267\u884C\u7684\uFF0C\u53EF\u4EE5\u770B\u5230\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0k61wb6pxj222y0cm77n.jpg" alt="image-20220323220519463"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0k62dm3knj21yi0fgwiz.jpg" alt="image-20220323220548051"></p><p>\u670D\u52A1\u7AEF\u4F1A\u5728\u53D1\u8D77\u8BF7\u6C42\u65F6\u6267\u884C\u8FD9\u4E9B\u62E6\u622A\u5668\u3002</p><p>\u90A3\u4E48\u8FD9\u4E2A\u62E6\u622A\u5668\u505A\u4E86\u4EC0\u4E48\u4E8B\u60C5\u5462\uFF0C\u9996\u5148\u6211\u4EEC\u8981\u660E\u786E\uFF0C\u6211\u4EEC\u7ED9\u8FC7\u6765\u7684\u8BF7\u6C42\u5730\u5740\uFF0C\u5E76\u4E0D\u662F\u4E00\u4E2A\u6709\u6548\u7684\u4E3B\u673A\u540D\u79F0\uFF0C\u800C\u662F\u670D\u52A1\u540D\u79F0\uFF0C\u90A3\u4E48\u600E\u4E48\u624D\u80FD\u5F97\u5230\u771F\u6B63\u9700\u8981\u8BBF\u95EE\u7684\u4E3B\u673A\u540D\u79F0\u5462\uFF0C\u80AF\u5B9A\u662F\u5F97\u627E Eureka \u83B7\u53D6\u7684\u3002</p><p>\u6211\u4EEC\u6765\u770B\u770B<code>loadBalancer.execute()</code>\u505A\u4E86\u4EC0\u4E48\uFF0C\u5B83\u7684\u5177\u4F53\u5B9E\u73B0\u4E3A<code>BlockingLoadBalancerClient</code>\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//\u4ECE\u4E0A\u9762\u7ED9\u8FDB\u6765\u4E86\u670D\u52A1\u7684\u540D\u79F0\u548C\u5177\u4F53\u7684\u8BF7\u6C42\u5B9E\u4F53</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">T</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">T</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> serviceId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">LoadBalancerRequest</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">T</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> throws IOException </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> hint </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">getHint</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">serviceId</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">LoadBalancerRequestAdapter</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">T</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DefaultRequestContext</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> lbRequest </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">LoadBalancerRequestAdapter</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DefaultRequestContext</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> hint</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Set</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">LoadBalancerLifecycle</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> supportedLifecycleProcessors </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">getSupportedLifecycleProcessors</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">serviceId</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    supportedLifecycleProcessors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#89DDFF;">((</span><span style="color:#A6ACCD;">lifecycle</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        lifecycle</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onStart</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">lbRequest</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#89DDFF;">  	</span><span style="color:#676E95;font-style:italic;">//\u53EF\u4EE5\u770B\u5230\u5728\u8FD9\u91CC\u4F1A\u8C03\u7528choose\u65B9\u6CD5\u81EA\u52A8\u83B7\u53D6\u5BF9\u5E94\u7684\u670D\u52A1\u5B9E\u4F8B\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">ServiceInstance</span><span style="color:#A6ACCD;"> serviceInstance </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">choose</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">serviceId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> lbRequest</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">serviceInstance </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        supportedLifecycleProcessors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#89DDFF;">((</span><span style="color:#A6ACCD;">lifecycle</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            lifecycle</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onComplete</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CompletionContext</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Status</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">DISCARD</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> lbRequest</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">EmptyResponse</span><span style="color:#89DDFF;">()));</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">});</span></span>
<span class="line"><span style="color:#89DDFF;">      	</span><span style="color:#676E95;font-style:italic;">//\u6CA1\u6709\u53D1\u73B0\u4EFB\u4F55\u6B64\u670D\u52A1\u7684\u5B9E\u4F8B\u5C31\u629B\u5F02\u5E38\uFF08\u4E4B\u524D\u7684\u6D4B\u8BD5\u4E2D\u53EF\u80FD\u5DF2\u7ECF\u9047\u5230\u4E86\uFF09</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">IllegalStateException</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">No instances available for </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> serviceId</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      	</span><span style="color:#676E95;font-style:italic;">//\u6210\u529F\u83B7\u53D6\u5230\u5BF9\u5E94\u670D\u52A1\u7684\u5B9E\u4F8B\uFF0C\u8FD9\u65F6\u5C31\u53EF\u4EE5\u53D1\u8D77HTTP\u8BF7\u6C42\u83B7\u53D6\u4FE1\u606F\u4E86</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">serviceId</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> serviceInstance</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> lbRequest</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6240\u4EE5\uFF0C\u5B9E\u9645\u4E0A\u5728\u8FDB\u884C\u8D1F\u8F7D\u5747\u8861\u7684\u65F6\u5019\uFF0C\u4F1A\u5411 Eureka \u53D1\u8D77\u8BF7\u6C42\uFF0C\u9009\u62E9\u4E00\u4E2A\u53EF\u7528\u7684\u5BF9\u5E94\u670D\u52A1\uFF0C\u7136\u540E\u4F1A\u8FD4\u56DE\u6B64\u670D\u52A1\u7684\u4E3B\u673A\u5730\u5740\u7B49\u4FE1\u606F\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0kuedkhinj221e0jin2y.jpg" alt="image-20220324120741736"></p><h3 id="\u81EA\u5B9A\u4E49\u8D1F\u8F7D\u5747\u8861\u7B56\u7565" tabindex="-1">\u81EA\u5B9A\u4E49\u8D1F\u8F7D\u5747\u8861\u7B56\u7565 <a class="header-anchor" href="#\u81EA\u5B9A\u4E49\u8D1F\u8F7D\u5747\u8861\u7B56\u7565" aria-hidden="true">#</a></h3><p>LoadBalancer \u9ED8\u8BA4\u63D0\u4F9B\u4E86\u4E24\u79CD\u8D1F\u8F7D\u5747\u8861\u7B56\u7565\uFF1A</p><ul><li>RandomLoadBalancer - \u968F\u673A\u5206\u914D\u7B56\u7565</li><li><strong>(\u9ED8\u8BA4)</strong> RoundRobinLoadBalancer - \u8F6E\u8BE2\u5206\u914D\u7B56\u7565</li></ul><p>\u73B0\u5728\u6211\u4EEC\u5E0C\u671B\u4FEE\u6539\u9ED8\u8BA4\u7684\u8D1F\u8F7D\u5747\u8861\u7B56\u7565\uFF0C\u53EF\u4EE5\u8FDB\u884C\u6307\u5B9A\uFF0C\u6BD4\u5982\u6211\u4EEC\u73B0\u5728\u5E0C\u671B\u7528\u6237\u670D\u52A1\u91C7\u7528\u968F\u673A\u5206\u914D\u7B56\u7565\uFF0C\u6211\u4EEC\u9700\u8981\u5148\u521B\u5EFA\u968F\u673A\u5206\u914D\u7B56\u7565\u7684\u914D\u7F6E\u7C7B\uFF08\u4E0D\u7528\u52A0<code>@Configuration</code>\uFF09\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">LoadBalancerConfig</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  	</span><span style="color:#676E95;font-style:italic;">//\u5C06\u5B98\u65B9\u63D0\u4F9B\u7684 RandomLoadBalancer \u6CE8\u518C\u4E3ABean</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Bean</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">ReactorLoadBalancer</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">ServiceInstance</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">randomLoadBalancer</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Environment</span><span style="color:#A6ACCD;"> environment</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">LoadBalancerClientFactory</span><span style="color:#A6ACCD;"> loadBalancerClientFactory</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> environment</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getProperty</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">LoadBalancerClientFactory</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">PROPERTY_NAME</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">RandomLoadBalancer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">loadBalancerClientFactory</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getLazyProvider</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ServiceInstanceListSupplier</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> name</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6211\u4EEC\u9700\u8981\u4E3A\u5BF9\u5E94\u7684\u670D\u52A1\u6307\u5B9A\u8D1F\u8F7D\u5747\u8861\u7B56\u7565\uFF0C\u76F4\u63A5\u4F7F\u7528\u6CE8\u89E3\u5373\u53EF\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Configuration</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">LoadBalancerClient</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">userservice</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">//\u6307\u5B9A\u4E3A userservice \u670D\u52A1\uFF0C\u53EA\u8981\u662F\u8C03\u7528\u6B64\u670D\u52A1\u90FD\u4F1A\u4F7F\u7528\u6211\u4EEC\u6307\u5B9A\u7684\u7B56\u7565</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">configuration</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> LoadBalancerConfig</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">//\u6307\u5B9A\u6211\u4EEC\u521A\u521A\u5B9A\u4E49\u597D\u7684\u914D\u7F6E\u7C7B</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BeanConfig</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Bean</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">LoadBalanced</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">RestTemplate</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">template</span><span style="color:#89DDFF;">(){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">RestTemplate</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6211\u4EEC\u5728<code>BlockingLoadBalancerClient</code>\u4E2D\u6DFB\u52A0\u65AD\u70B9\uFF0C\u89C2\u5BDF\u662F\u5426\u91C7\u7528\u6211\u4EEC\u6307\u5B9A\u7684\u7B56\u7565\u8FDB\u884C\u8BF7\u6C42\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0lc17or9aj221y07swhq.jpg" alt="image-20220324221750289"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0lc0mbsmqj21ye07yjuh.jpg" alt="image-20220324221713964"></p><p>\u53D1\u73B0\u8BBF\u95EE userservice \u670D\u52A1\u7684\u7B56\u7565\u5DF2\u7ECF\u66F4\u6539\u4E3A\u6211\u4EEC\u6307\u5B9A\u7684\u7B56\u7565\u4E86\u3002</p><h3 id="openfeign-\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861" tabindex="-1">OpenFeign \u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861 <a class="header-anchor" href="#openfeign-\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861" aria-hidden="true">#</a></h3><p>\u5B98\u65B9\u6587\u6863\uFF1A<a href="https://docs.spring.io/spring-cloud-openfeign/docs/current/reference/html/" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-cloud-openfeign/docs/current/reference/html/</a></p><p>Feign \u548C RestTemplate \u4E00\u6837\uFF0C\u4E5F\u662F HTTP \u5BA2\u6237\u7AEF\u8BF7\u6C42\u5DE5\u5177\uFF0C\u4F46\u662F\u5B83\u7684\u4F7F\u7528\u65B9\u5F0F\u66F4\u52A0\u4FBF\u6377\u3002\u9996\u5148\u662F\u4F9D\u8D56\uFF1A</p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.cloud</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-cloud-starter-openfeign</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u5728\u542F\u52A8\u7C7B\u6DFB\u52A0<code>@EnableFeignClients</code>\u6CE8\u89E3\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">SpringBootApplication</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">EnableFeignClients</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowApplication</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        SpringApplication</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">BorrowApplication</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> args</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u90A3\u4E48\u73B0\u5728\u6211\u4EEC\u9700\u8981\u8C03\u7528\u5176\u4ED6\u5FAE\u670D\u52A1\u63D0\u4F9B\u7684\u63A5\u53E3\uFF0C\u8BE5\u600E\u4E48\u505A\u5462\uFF1F\u6211\u4EEC\u76F4\u63A5\u521B\u5EFA\u4E00\u4E2A\u5BF9\u5E94\u670D\u52A1\u7684\u63A5\u53E3\u7C7B\u5373\u53EF\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">FeignClient</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">userservice</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">//\u58F0\u660E\u4E3Auserservice\u670D\u52A1\u7684HTTP\u8BF7\u6C42\u5BA2\u6237\u7AEF</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserClient</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6211\u4EEC\u76F4\u63A5\u521B\u5EFA\u6240\u9700\u7C7B\u578B\u7684\u65B9\u6CD5\uFF0C\u6BD4\u5982\u6211\u4EEC\u4E4B\u524D\u7684\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">RestTemplate</span><span style="color:#A6ACCD;"> template </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">RestTemplate</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> template</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForObject</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://userservice/user/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> User</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span></code></pre></div><p>\u73B0\u5728\u53EF\u4EE5\u76F4\u63A5\u5199\u6210\u8FD9\u6837\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">FeignClient</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">userservice</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserClient</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  	</span><span style="color:#676E95;font-style:italic;">//\u8DEF\u5F84\u4FDD\u8BC1\u548C\u5176\u4ED6\u5FAE\u670D\u52A1\u63D0\u4F9B\u7684\u4E00\u81F4\u5373\u53EF</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/user/{uid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getUserById</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">PathVariable</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">//\u53C2\u6570\u548C\u8FD4\u56DE\u503C\u4E5F\u4FDD\u6301\u4E00\u81F4</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6211\u4EEC\u76F4\u63A5\u6CE8\u5165\u4F7F\u7528\uFF08\u6709 Mybatis \u90A3\u5473\u4E86\uFF09\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#C792EA;">UserClient</span><span style="color:#A6ACCD;"> userClient</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">UserBorrowDetail</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getUserBorrowDetailByUid</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Borrow</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> borrow </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mapper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBorrowsByUid</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> userClient</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getUserById</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//\u8FD9\u91CC\u4E0D\u7528\u518D\u5199IP\uFF0C\u76F4\u63A5\u5199\u670D\u52A1\u540D\u79F0bookservice</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Book</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> bookList </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> borrow</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stream</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">b </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> template</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getForObject</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://bookservice/book/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBid</span><span style="color:#89DDFF;">(),</span><span style="color:#A6ACCD;"> Book</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">collect</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Collectors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toList</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">UserBorrowDetail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> bookList</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8BBF\u95EE\uFF0C\u53EF\u4EE5\u770B\u5230\u7ED3\u679C\u4F9D\u7136\u662F\u6B63\u786E\u7684\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0l51tto72j229e080dhe.jpg" alt="image-20220324181614387"></p><p>\u5E76\u4E14\u6211\u4EEC\u53EF\u4EE5\u89C2\u5BDF\u4E00\u4E0B\u4E24\u4E2A\u7528\u6237\u5FAE\u670D\u52A1\u7684\u8C03\u7528\u60C5\u51B5\uFF0C\u4E5F\u662F\u4EE5\u8D1F\u8F7D\u5747\u8861\u7684\u5F62\u5F0F\u8FDB\u884C\u7684\u3002</p><p>\u6309\u7167\u540C\u6837\u7684\u65B9\u6CD5\uFF0C\u6211\u4EEC\u63A5\u7740\u5C06\u56FE\u4E66\u7BA1\u7406\u670D\u52A1\u7684\u8C03\u7528\u4E5F\u6539\u6210\u63A5\u53E3\u5F62\u5F0F\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0l53boxmlj21j60bgq51.jpg" alt="image-20220324181740566"></p><p>\u6700\u540E\u6211\u4EEC\u7684 Service \u4EE3\u7801\u5C31\u53D8\u6210\u4E86\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Service</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowServiceImpl</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowService</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">BorrowMapper</span><span style="color:#A6ACCD;"> mapper</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">UserClient</span><span style="color:#A6ACCD;"> userClient</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">BookClient</span><span style="color:#A6ACCD;"> bookClient</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">UserBorrowDetail</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getUserBorrowDetailByUid</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Borrow</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> borrow </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> mapper</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBorrowsByUid</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> userClient</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getUserById</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Book</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> bookList </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> borrow</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stream</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">b </span><span style="color:#C792EA;">-&gt;</span><span style="color:#A6ACCD;"> bookClient</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBookById</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBid</span><span style="color:#89DDFF;">()))</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">collect</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Collectors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toList</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">UserBorrowDetail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> bookList</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u7EE7\u7EED\u8BBF\u95EE\u8FDB\u884C\u6D4B\u8BD5\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0l54vuecvj226206igmz.jpg" alt="image-20220324181910173"></p><p>OK\uFF0C\u6B63\u5E38\u3002</p><p>\u5F53\u7136\uFF0CFeign \u4E5F\u6709\u5F88\u591A\u7684\u5176\u4ED6\u914D\u7F6E\u9009\u9879\uFF0C\u8FD9\u91CC\u5C31\u4E0D\u591A\u505A\u4ECB\u7ECD\u4E86\uFF0C\u8BE6\u7EC6\u8BF7\u67E5\u9605\u5B98\u65B9\u6587\u6863\u3002</p><hr><h2 id="hystrix-\u670D\u52A1\u7194\u65AD" tabindex="-1">Hystrix \u670D\u52A1\u7194\u65AD <a class="header-anchor" href="#hystrix-\u670D\u52A1\u7194\u65AD" aria-hidden="true">#</a></h2><p>\u5B98\u65B9\u6587\u6863\uFF1A<a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-netflix/1.3.5.RELEASE/single/spring-cloud-netflix.html#_circuit_breaker_hystrix_clients" target="_blank" rel="noopener noreferrer">https://cloud.spring.io/spring-cloud-static/spring-cloud-netflix/1.3.5.RELEASE/single/spring-cloud-netflix.html#_circuit_breaker_hystrix_clients</a></p><p>\u6211\u4EEC\u77E5\u9053\uFF0C\u5FAE\u670D\u52A1\u4E4B\u95F4\u662F\u53EF\u4EE5\u8FDB\u884C\u76F8\u4E92\u8C03\u7528\u7684\uFF0C\u90A3\u4E48\u5982\u679C\u51FA\u73B0\u4E86\u4E0B\u9762\u7684\u60C5\u51B5\u4F1A\u5BFC\u81F4\u4EC0\u4E48\u95EE\u9898\uFF1F</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0ky07zn6tj219g07adgz.jpg" alt="image-20220324141230070"></p><p>\u7531\u4E8E\u4F4D\u4E8E\u6700\u5E95\u7AEF\u7684\u670D\u52A1\u63D0\u4F9B\u8005 E \u53D1\u751F\u6545\u969C\uFF0C\u90A3\u4E48\u6B64\u65F6\u4F1A\u76F4\u63A5\u5BFC\u81F4\u670D\u52A1 ABCD \u5168\u7EBF\u5D29\u6E83\uFF0C\u5C31\u50CF\u96EA\u5D29\u4E86\u4E00\u6837\u3002</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0ky50sw4jj219s07yabg.jpg" alt="image-20220324141706946"></p><p>\u8FD9\u79CD\u95EE\u9898\u5B9E\u9645\u4E0A\u662F\u4E0D\u53EF\u907F\u514D\u7684\uFF0C\u7531\u4E8E\u591A\u79CD\u56E0\u7D20\uFF0C\u6BD4\u5982\u7F51\u7EDC\u5361\u987F\u3001\u7CFB\u7EDF\u6545\u969C\u3001\u786C\u4EF6\u95EE\u9898\u7B49\uFF0C\u90FD\u5B58\u5728\u4E00\u5B9A\u53EF\u80FD\uFF0C\u4F1A\u5BFC\u81F4\u8FD9\u79CD\u6781\u7AEF\u7684\u60C5\u51B5\u53D1\u751F\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u9700\u8981\u5BFB\u627E\u4E00\u4E2A\u5E94\u5BF9\u8FD9\u79CD\u6781\u7AEF\u60C5\u51B5\u7684\u89E3\u51B3\u65B9\u6848\u3002</p><p>\u4E3A\u4E86\u89E3\u51B3\u5206\u5E03\u5F0F\u7CFB\u7EDF\u7684\u96EA\u5D29\u95EE\u9898\uFF0CSpringCloud \u63D0\u4F9B\u4E86 Hystrix \u7194\u65AD\u5668\u7EC4\u4EF6\uFF0C\u4ED6\u5C31\u50CF\u6211\u4EEC\u5BB6\u4E2D\u7684\u4FDD\u9669\u4E1D\u4E00\u6837\uFF0C\u5F53\u7535\u6D41\u8FC7\u8F7D\u5C31\u4F1A\u76F4\u63A5\u7194\u65AD\uFF0C\u9632\u6B62\u5371\u9669\u8FDB\u4E00\u6B65\u53D1\u751F\uFF0C\u4ECE\u800C\u4FDD\u8BC1\u5BB6\u5EAD\u7528\u7535\u5B89\u5168\u3002\u53EF\u4EE5\u60F3\u8C61\u4E00\u4E0B\uFF0C\u5982\u679C\u6574\u6761\u94FE\u8DEF\u4E0A\u7684\u670D\u52A1\u5DF2\u7ECF\u5168\u7EBF\u5D29\u6E83\uFF0C\u8FD9\u65F6\u8FD8\u5728\u4E0D\u65AD\u5730\u6709\u5927\u91CF\u7684\u8BF7\u6C42\u5230\u8FBE\uFF0C\u9700\u8981\u5404\u4E2A\u670D\u52A1\u8FDB\u884C\u5904\u7406\uFF0C\u80AF\u5B9A\u662F\u4F1A\u4F7F\u5F97\u60C5\u51B5\u8D8A\u6765\u8D8A\u7CDF\u7CD5\u7684\u3002</p><p>\u6211\u4EEC\u6765\u8BE6\u7EC6\u770B\u770B\u5B83\u7684\u5DE5\u4F5C\u673A\u5236\u3002</p><h3 id="\u670D\u52A1\u964D\u7EA7" tabindex="-1">\u670D\u52A1\u964D\u7EA7 <a class="header-anchor" href="#\u670D\u52A1\u964D\u7EA7" aria-hidden="true">#</a></h3><p>\u9996\u5148\u6211\u4EEC\u6765\u770B\u770B\u670D\u52A1\u964D\u7EA7\uFF0C\u6CE8\u610F\u4E00\u5B9A\u8981\u533A\u5206\u5F00\u670D\u52A1\u964D\u7EA7\u548C\u670D\u52A1\u7194\u65AD\u7684\u533A\u522B\uFF0C\u670D\u52A1\u964D\u7EA7\u5E76\u4E0D\u4F1A\u76F4\u63A5\u8FD4\u56DE\u9519\u8BEF\uFF0C\u800C\u662F\u53EF\u4EE5\u63D0\u4F9B\u4E00\u4E2A\u8865\u6551\u63AA\u65BD\uFF0C\u6B63\u5E38\u54CD\u5E94\u7ED9\u8BF7\u6C42\u8005\u3002\u8FD9\u6837\u76F8\u5F53\u4E8E\u670D\u52A1\u4F9D\u7136\u53EF\u7528\uFF0C\u4F46\u662F\u670D\u52A1\u80FD\u529B\u80AF\u5B9A\u662F\u4E0B\u964D\u4E86\u7684\u3002</p><p>\u6211\u4EEC\u5C31\u57FA\u4E8E\u501F\u9605\u7BA1\u7406\u670D\u52A1\u6765\u8FDB\u884C\u8BB2\u89E3\uFF0C\u6211\u4EEC\u4E0D\u5F00\u542F\u7528\u6237\u670D\u52A1\u548C\u56FE\u4E66\u670D\u52A1\uFF0C\u8868\u793A\u7528\u6237\u670D\u52A1\u548C\u56FE\u4E66\u670D\u52A1\u5DF2\u7ECF\u6302\u6389\u4E86\u3002</p><p>\u8FD9\u91CC\u6211\u4EEC\u5BFC\u5165 Hystrix \u7684\u4F9D\u8D56\uFF08\u6B64\u9879\u76EE\u5DF2\u7ECF\u505C\u6B62\u7EF4\u62A4\uFF0CSpringCloud \u4F9D\u8D56\u4E2D\u5DF2\u7ECF\u4E0D\u81EA\u5E26\u4E86\uFF0C\u6240\u4EE5\u8BF4\u9700\u8981\u81EA\u5DF1\u5355\u72EC\u5BFC\u5165\uFF09\uFF1A</p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.cloud</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-cloud-starter-netflix-hystrix</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">     		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">2.2.10.RELEASE</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6211\u4EEC\u9700\u8981\u5728\u542F\u52A8\u7C7B\u6DFB\u52A0\u6CE8\u89E3\u5F00\u542F\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">SpringBootApplication</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">EnableHystrix</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">//\u542F\u7528Hystrix</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowApplication</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        SpringApplication</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">BorrowApplication</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> args</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u90A3\u4E48\u73B0\u5728\uFF0C\u7531\u4E8E\u7528\u6237\u670D\u52A1\u548C\u56FE\u4E66\u670D\u52A1\u4E0D\u53EF\u7528\uFF0C\u6240\u4EE5\u67E5\u8BE2\u501F\u9605\u4FE1\u606F\u7684\u8BF7\u6C42\u80AF\u5B9A\u662F\u6CA1\u529E\u6CD5\u6B63\u5E38\u54CD\u5E94\u7684\uFF0C\u8FD9\u65F6\u6211\u4EEC\u53EF\u4EE5\u63D0\u4F9B\u4E00\u4E2A\u5907\u9009\u65B9\u6848\uFF0C\u4E5F\u5C31\u662F\u8BF4\u5F53\u670D\u52A1\u51FA\u73B0\u5F02\u5E38\u65F6\uFF0C\u8FD4\u56DE\u6211\u4EEC\u7684\u5907\u9009\u65B9\u6848\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RestController</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowController</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">BorrowService</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">HystrixCommand</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">fallbackMethod</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">onError</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">//\u4F7F\u7528@HystrixCommand\u6765\u6307\u5B9A\u5907\u9009\u65B9\u6848</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/borrow/{uid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">UserBorrowDetail</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">findUserBorrows</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">PathVariable</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getUserBorrowDetailByUid</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  	</span><span style="color:#676E95;font-style:italic;">//\u5907\u9009\u65B9\u6848\uFF0C\u8FD9\u91CC\u76F4\u63A5\u8FD4\u56DE\u7A7A\u5217\u8868\u4E86</span></span>
<span class="line"><span style="color:#89DDFF;">  	</span><span style="color:#676E95;font-style:italic;">//\u6CE8\u610F\u53C2\u6570\u548C\u8FD4\u56DE\u503C\u8981\u548C\u4E0A\u9762\u7684\u4E00\u81F4</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">UserBorrowDetail</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">UserBorrowDetail</span><span style="color:#89DDFF;">(null,</span><span style="color:#A6ACCD;"> Collections</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">emptyList</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u867D\u7136\u6211\u4EEC\u7684\u670D\u52A1\u65E0\u6CD5\u6B63\u5E38\u8FD0\u884C\u4E86\uFF0C\u4F46\u662F\u4F9D\u7136\u53EF\u4EE5\u7ED9\u6D4F\u89C8\u5668\u6B63\u5E38\u8FD4\u56DE\u54CD\u5E94\u6570\u636E\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0kzgnuv0ej21x406ujvb.jpg" alt="image-20220324150253610"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0kzgygdd3j218s06qjru.jpg" alt="image-20220324150310955"></p><p>\u670D\u52A1\u964D\u7EA7\u662F\u4E00\u79CD\u6BD4\u8F83\u6E29\u67D4\u7684\u89E3\u51B3\u65B9\u6848\uFF0C\u867D\u7136\u670D\u52A1\u672C\u8EAB\u7684\u4E0D\u53EF\u7528\uFF0C\u4F46\u662F\u80FD\u591F\u4FDD\u8BC1\u6B63\u5E38\u54CD\u5E94\u6570\u636E\u3002</p><h3 id="\u670D\u52A1\u7194\u65AD" tabindex="-1">\u670D\u52A1\u7194\u65AD <a class="header-anchor" href="#\u670D\u52A1\u7194\u65AD" aria-hidden="true">#</a></h3><p>\u7194\u65AD\u673A\u5236\u662F\u5E94\u5BF9\u96EA\u5D29\u6548\u5E94\u7684\u4E00\u79CD\u5FAE\u670D\u52A1\u94FE\u8DEF\u4FDD\u62A4\u673A\u5236\uFF0C\u5F53\u68C0\u6D4B\u51FA\u94FE\u8DEF\u7684\u67D0\u4E2A\u5FAE\u670D\u52A1\u4E0D\u53EF\u7528\u6216\u8005\u54CD\u5E94\u65F6\u95F4\u592A\u957F\u65F6\uFF0C\u4F1A\u8FDB\u884C\u670D\u52A1\u7684\u964D\u7EA7\uFF0C\u8FDB\u800C\u7194\u65AD\u8BE5\u8282\u70B9\u5FAE\u670D\u52A1\u7684\u8C03\u7528\uFF0C\u5FEB\u901F\u8FD4\u56DE\u201D\u9519\u8BEF\u201D\u7684\u54CD\u5E94\u4FE1\u606F\u3002\u5F53\u68C0\u6D4B\u5230\u8BE5\u8282\u70B9\u5FAE\u670D\u52A1\u54CD\u5E94\u6B63\u5E38\u540E\u6062\u590D\u8C03\u7528\u94FE\u8DEF\u3002</p><p>\u5B9E\u9645\u4E0A\uFF0C\u7194\u65AD\u5C31\u662F\u5728\u964D\u7EA7\u7684\u57FA\u7840\u4E0A\u8FDB\u4E00\u6B65\u5347\u7EA7\u5F62\u6210\u7684\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5728\u4E00\u6BB5\u65F6\u95F4\u5185\u591A\u6B21\u8C03\u7528\u5931\u8D25\uFF0C\u90A3\u4E48\u5C31\u76F4\u63A5\u5347\u7EA7\u4E3A\u7194\u65AD\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u6DFB\u52A0\u4E24\u6761\u8F93\u51FA\u8BED\u53E5\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RestController</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowController</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">BorrowService</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">HystrixCommand</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">fallbackMethod</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">onError</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/borrow/{uid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">UserBorrowDetail</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">findUserBorrows</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">PathVariable</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u5F00\u59CB\u5411\u5176\u4ED6\u670D\u52A1\u83B7\u53D6\u4FE1\u606F</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getUserBorrowDetailByUid</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">UserBorrowDetail</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">onError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u670D\u52A1\u9519\u8BEF\uFF0C\u8FDB\u5165\u5907\u9009\u65B9\u6CD5\uFF01</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">UserBorrowDetail</span><span style="color:#89DDFF;">(null,</span><span style="color:#A6ACCD;"> Collections</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">emptyList</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\uFF0C\u6211\u4EEC\u5728\u6D4F\u89C8\u5668\u4E2D\u75AF\u72C2\u70B9\u51FB\u5237\u65B0\u6309\u94AE\uFF0C\u5BF9\u6B64\u670D\u52A1\u75AF\u72C2\u53D1\u8D77\u8BF7\u6C42\uFF0C\u53EF\u4EE5\u770B\u5230\u540E\u53F0\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0kzz87azgj21960hwwhz.jpg" alt="image-20220324152044551"></p><p>\u4E00\u5F00\u59CB\u7684\u65F6\u5019\uFF0C\u4F1A\u6B63\u5E38\u5730\u53BB\u8C03\u7528 Controller \u5BF9\u5E94\u7684\u65B9\u6CD5<code>findUserBorrows</code>\uFF0C\u53D1\u73B0\u5931\u8D25\u7136\u540E\u8FDB\u5165\u5907\u9009\u65B9\u6CD5\uFF0C\u4F46\u662F\u6211\u4EEC\u53D1\u73B0\u5728\u6301\u7EED\u8BF7\u6C42\u4E00\u6BB5\u65F6\u95F4\u4E4B\u540E\uFF0C\u6CA1\u6709\u518D\u8C03\u7528\u8FD9\u4E2A\u65B9\u6CD5\uFF0C\u800C\u662F\u76F4\u63A5\u8C03\u7528\u5907\u9009\u65B9\u6848\uFF0C\u8FD9\u4FBF\u662F\u5347\u7EA7\u5230\u4E86\u7194\u65AD\u72B6\u6001\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u7EE7\u7EED\u4E0D\u65AD\u70B9\u51FB\uFF0C\u7EE7\u7EED\u4E0D\u65AD\u5730\u53D1\u8D77\u8BF7\u6C42\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0l06mgm5yj21uy0b0gns.jpg" alt="image-20220324152750797"></p><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u8FC7\u4E86\u4E00\u6BB5\u65F6\u95F4\u4E4B\u540E\uFF0C\u4F1A\u5C1D\u8BD5\u6B63\u5E38\u6267\u884C\u4E00\u6B21<code>findUserBorrows</code>\uFF0C\u4F46\u662F\u4F9D\u7136\u662F\u5931\u8D25\u72B6\u6001\uFF0C\u6240\u4EE5\u7EE7\u7EED\u4FDD\u6301\u7194\u65AD\u72B6\u6001\u3002</p><p>\u6240\u4EE5\u5F97\u5230\u7ED3\u8BBA\uFF0C\u5B83\u80FD\u591F\u5BF9\u4E00\u6BB5\u65F6\u95F4\u5185\u51FA\u73B0\u7684\u9519\u8BEF\u8FDB\u884C\u4FA6\u6D4B\uFF0C\u5F53\u4FA6\u6D4B\u5230\u51FA\u9519\u6B21\u6570\u8FC7\u591A\u65F6\uFF0C\u7194\u65AD\u5668\u4F1A\u6253\u5F00\uFF0C\u6240\u6709\u7684\u8BF7\u6C42\u4F1A\u76F4\u63A5\u54CD\u5E94\u5931\u8D25\uFF0C\u4E00\u6BB5\u65F6\u95F4\u540E\uFF0C\u53EA\u6267\u884C\u4E00\u5B9A\u6570\u91CF\u7684\u8BF7\u6C42\uFF0C\u5982\u679C\u8FD8\u662F\u51FA\u73B0\u9519\u8BEF\uFF0C\u90A3\u4E48\u5219\u7EE7\u7EED\u4FDD\u6301\u6253\u5F00\u72B6\u6001\uFF0C\u5426\u5219\u8BF4\u660E\u670D\u52A1\u6062\u590D\u6B63\u5E38\u8FD0\u884C\uFF0C\u5173\u95ED\u7194\u65AD\u5668\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u6D4B\u8BD5\u4E00\u4E0B\uFF0C\u5F00\u542F\u53E6\u5916\u4E24\u4E2A\u670D\u52A1\u4E4B\u540E\uFF0C\u7EE7\u7EED\u70B9\u51FB\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0l09mmg95j21ue0eatb5.jpg" alt="image-20220324153044583"></p><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u5F53\u53E6\u5916\u4E24\u4E2A\u670D\u52A1\u6B63\u5E38\u8FD0\u884C\u4E4B\u540E\uFF0C\u5F53\u518D\u6B21\u5C1D\u8BD5\u8C03\u7528<code>findUserBorrows</code>\u4E4B\u540E\u4F1A\u6210\u529F\uFF0C\u4E8E\u662F\u7194\u65AD\u673A\u5236\u5C31\u5173\u95ED\u4E86\uFF0C\u670D\u52A1\u6062\u590D\u8FD0\u884C\u3002</p><p>\u603B\u7ED3\u4E00\u4E0B\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0l0iulmatj21rc0ba0vj.jpg" alt="image-20220324153935858"></p><h3 id="openfeign-\u5B9E\u73B0\u964D\u7EA7" tabindex="-1">OpenFeign \u5B9E\u73B0\u964D\u7EA7 <a class="header-anchor" href="#openfeign-\u5B9E\u73B0\u964D\u7EA7" aria-hidden="true">#</a></h3><p>Hystrix \u4E5F\u53EF\u4EE5\u914D\u5408 Feign \u8FDB\u884C\u964D\u7EA7\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5BF9\u5E94\u63A5\u53E3\u4E2D\u5B9A\u4E49\u7684\u8FDC\u7A0B\u8C03\u7528\u5355\u72EC\u8FDB\u884C\u964D\u7EA7\u64CD\u4F5C\u3002</p><p>\u6BD4\u5982\u6211\u4EEC\u8FD8\u662F\u4EE5\u7528\u6237\u670D\u52A1\u6302\u6389\u4E3A\u4F8B\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u65F6\u5019\u80AF\u5B9A\u662F\u4F1A\u8FDC\u7A0B\u8C03\u7528\u5931\u8D25\u7684\uFF0C\u4E5F\u5C31\u662F\u8BF4\u6211\u4EEC\u7684 Controller \u4E2D\u7684\u65B9\u6CD5\u5728\u6267\u884C\u8FC7\u7A0B\u4E2D\u4F1A\u76F4\u63A5\u629B\u51FA\u5F02\u5E38\uFF0C\u8FDB\u800C\u88AB Hystrix \u76D1\u63A7\u5230\u5E76\u8FDB\u884C\u670D\u52A1\u964D\u7EA7\u3002</p><p>\u800C\u5B9E\u9645\u4E0A\u5BFC\u81F4\u65B9\u6CD5\u6267\u884C\u5F02\u5E38\u7684\u6839\u6E90\u5C31\u662F\u8FDC\u7A0B\u8C03\u7528\u5931\u8D25\uFF0C\u6240\u4EE5\u6211\u4EEC\u6362\u4E2A\u601D\u8DEF\uFF0C\u65E2\u7136\u7528\u6237\u670D\u52A1\u8C03\u7528\u5931\u8D25\uFF0C\u90A3\u4E48\u6211\u5C31\u7ED9\u8FD9\u4E2A\u8FDC\u7A0B\u8C03\u7528\u6DFB\u52A0\u4E00\u4E2A\u66FF\u4EE3\u65B9\u6848\uFF0C\u5982\u679C\u6B64\u8FDC\u7A0B\u8C03\u7528\u5931\u8D25\uFF0C\u90A3\u4E48\u5C31\u76F4\u63A5\u4E0A\u66FF\u4EE3\u65B9\u6848\u3002\u90A3\u4E48\u600E\u4E48\u5B9E\u73B0\u66FF\u4EE3\u65B9\u6848\u5462\uFF1F\u6211\u4EEC\u77E5\u9053 Feign \u90FD\u662F\u4EE5\u63A5\u53E3\u7684\u5F62\u5F0F\u6765\u58F0\u660E\u8FDC\u7A0B\u8C03\u7528\uFF0C\u90A3\u4E48\u65E2\u7136\u8FDC\u7A0B\u8C03\u7528\u5DF2\u7ECF\u5931\u6548\uFF0C\u6211\u4EEC\u5C31\u81EA\u884C\u5BF9\u5176\u8FDB\u884C\u5B9E\u73B0\uFF0C\u521B\u5EFA\u4E00\u4E2A\u5B9E\u73B0\u7C7B\uFF0C\u5BF9\u539F\u6709\u7684\u63A5\u53E3\u65B9\u6CD5\u8FDB\u884C\u66FF\u4EE3\u65B9\u6848\u5B9E\u73B0\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Component</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">//\u6CE8\u610F\uFF0C\u9700\u8981\u5C06\u5176\u6CE8\u518C\u4E3ABean\uFF0CFeign\u624D\u80FD\u81EA\u52A8\u6CE8\u5165</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserFallbackClient</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserClient</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getUserById</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">//\u8FD9\u91CC\u6211\u4EEC\u81EA\u884C\u5BF9\u5176\u8FDB\u884C\u5B9E\u73B0\uFF0C\u5E76\u8FD4\u56DE\u6211\u4EEC\u7684\u66FF\u4EE3\u65B9\u6848</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">User</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        user</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setName</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u6211\u662F\u66FF\u4EE3\u65B9\u6848</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> user</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5B9E\u73B0\u5B8C\u6210\u540E\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u5728\u539F\u6709\u7684\u63A5\u53E3\u4E2D\u6307\u5B9A\u5931\u8D25\u66FF\u4EE3\u5B9E\u73B0\u5373\u53EF\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">//fallback\u53C2\u6570\u6307\u5B9A\u4E3A\u6211\u4EEC\u521A\u521A\u7F16\u5199\u7684\u5B9E\u73B0\u7C7B</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">FeignClient</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">userservice</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">fallback</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> UserFallbackClient</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">interface</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">UserClient</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/user/{uid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">User</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getUserById</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">PathVariable</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u73B0\u5728\u53BB\u6389<code>BorrowController</code>\u7684<code>@HystrixCommand</code>\u6CE8\u89E3\u548C\u5907\u9009\u65B9\u6CD5\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RestController</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BorrowController</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">BorrowService</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/borrow/{uid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">UserBorrowDetail</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">findUserBorrows</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">PathVariable</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">uid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> uid</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getUserBorrowDetailByUid</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">uid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6700\u540E\u6211\u4EEC\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u5F00\u542F\u7194\u65AD\u652F\u6301\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">feign</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">circuitbreaker</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">enabled</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"></span></code></pre></div><p>\u542F\u52A8\u670D\u52A1\uFF0C\u8C03\u7528\u63A5\u53E3\u8BD5\u8BD5\u770B\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0m0k7jve9j21zq03kdi6.jpg" alt="image-20220325122629016"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0m0gmj8ayj229c07q75v.jpg" alt="image-20220325122301779"></p><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u73B0\u5728\u5DF2\u7ECF\u91C7\u7528\u6211\u4EEC\u7684\u66FF\u4EE3\u65B9\u6848\u4F5C\u4E3A\u7ED3\u679C\u3002</p><h3 id="\u76D1\u63A7\u9875\u9762\u90E8\u7F72" tabindex="-1">\u76D1\u63A7\u9875\u9762\u90E8\u7F72 <a class="header-anchor" href="#\u76D1\u63A7\u9875\u9762\u90E8\u7F72" aria-hidden="true">#</a></h3><p>\u9664\u4E86\u5BF9\u670D\u52A1\u7684\u964D\u7EA7\u548C\u7194\u65AD\u5904\u7406\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u5BF9\u5176\u8FDB\u884C\u5B9E\u65F6\u76D1\u63A7\uFF0C\u53EA\u9700\u8981\u5B89\u88C5\u76D1\u63A7\u9875\u9762\u5373\u53EF\uFF0C\u8FD9\u91CC\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u9879\u76EE\uFF0C\u5BFC\u5165\u4F9D\u8D56\uFF1A</p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.cloud</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-cloud-starter-netflix-hystrix-dashboard</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">2.2.10.RELEASE</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6DFB\u52A0\u914D\u7F6E\u6587\u4EF6\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8900</span></span>
<span class="line"><span style="color:#F07178;">hystrix</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">dashboard</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># \u5C06localhost\u6DFB\u52A0\u5230\u767D\u540D\u5355\uFF0C\u9ED8\u8BA4\u662F\u4E0D\u5141\u8BB8\u7684</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">proxy-stream-allow-list</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u521B\u5EFA\u4E3B\u7C7B\uFF0C\u6CE8\u610F\u9700\u8981\u6DFB\u52A0<code>@EnableHystrixDashboard</code>\u6CE8\u89E3\u5F00\u542F\u7BA1\u7406\u9875\u9762\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">SpringBootApplication</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">EnableHystrixDashboard</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">HystrixDashBoardApplication</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        SpringApplication</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">HystrixDashBoardApplication</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> args</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u542F\u52A8 Hystrix \u7BA1\u7406\u9875\u9762\u670D\u52A1\uFF0C\u7136\u540E\u6211\u4EEC\u9700\u8981\u5728\u8981\u8FDB\u884C\u76D1\u63A7\u7684\u670D\u52A1\u4E2D\u6DFB\u52A0 Actuator \u4F9D\u8D56\uFF1A</p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.boot</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-boot-starter-actuator</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>Actuator \u662F SpringBoot \u7A0B\u5E8F\u7684\u76D1\u63A7\u7CFB\u7EDF\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u5065\u5EB7\u68C0\u67E5\uFF0C\u8BB0\u5F55\u4FE1\u606F\u7B49\u3002\u5728\u4F7F\u7528\u4E4B\u524D\u9700\u8981\u5F15\u5165 spring-boot-starter-actuator\uFF0C\u5E76\u505A\u7B80\u5355\u7684\u914D\u7F6E\u5373\u53EF\u3002</p></blockquote><p>\u6DFB\u52A0\u6B64\u4F9D\u8D56\u540E\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728 IDEA \u4E2D\u67E5\u770B\u8FD0\u884C\u60C5\u51B5\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0ld5ia0z8j21uw0e6god.jpg" alt="image-20220324225633805"></p><p>\u7136\u540E\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u914D\u7F6E Actuator \u6DFB\u52A0\u66B4\u9732\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">management</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">endpoints</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">web</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">exposure</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">include</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6211\u4EEC\u6253\u5F00\u521A\u521A\u542F\u52A8\u7684\u7BA1\u7406\u9875\u9762\uFF0C\u5730\u5740\u4E3A\uFF1A<code>http://localhost:8900/hystrix/</code></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0ld6jtiijj22ij0u042v.jpg" alt="image-20220324225733550"></p><p>\u5728\u4E2D\u95F4\u586B\u5199\u8981\u76D1\u63A7\u7684\u670D\u52A1\uFF1A\u6BD4\u5982\u501F\u9605\u670D\u52A1\uFF1A<code>http://localhost:8301/actuator/hystrix.stream</code>\uFF0C\u6CE8\u610F\u540E\u9762\u8981\u6DFB\u52A0<code>/actuator/hystrix.stream</code>\uFF0C\u7136\u540E\u70B9\u51FB Monitor Stream \u5373\u53EF\u8FDB\u5165\u76D1\u63A7\u9875\u9762\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0ldejq3n0j22ly0puwhu.jpg" alt="image-20220324230515009"></p><p>\u53EF\u4EE5\u770B\u5230\u73B0\u5728\u90FD\u662F Loading \u72B6\u6001\uFF0C\u8FD9\u662F\u56E0\u4E3A\u8FD8\u6CA1\u6709\u5F00\u59CB\u7EDF\u8BA1\uFF0C\u6211\u4EEC\u73B0\u5728\u5C1D\u8BD5\u8C03\u7528\u51E0\u6B21\u6211\u4EEC\u7684\u670D\u52A1\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0ldfbaoi5j22660bqgnc.jpg" alt="image-20220324230559068"></p><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u5728\u8C03\u7528\u4E4B\u540E\uFF0C\u76D1\u63A7\u9875\u9762\u51FA\u73B0\u4E86\u4FE1\u606F\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0ldgfihczj21wq0ksn03.jpg" alt="image-20220324230703600"></p><p>\u53EF\u4EE5\u770B\u5230 5 \u6B21\u8BBF\u95EE\u90FD\u662F\u6B63\u5E38\u7684\uFF0C\u6240\u4EE5\u663E\u793A\u4E3A\u7EFF\u8272\uFF0C\u63A5\u7740\u6211\u4EEC\u6765\u5C1D\u8BD5\u5C06\u56FE\u4E66\u670D\u52A1\u5173\u95ED\uFF0C\u8FD9\u6837\u5C31\u4F1A\u5BFC\u81F4\u670D\u52A1\u964D\u7EA7\u751A\u81F3\u7194\u65AD\uFF0C\u7136\u540E\u518D\u591A\u6B21\u8BBF\u95EE\u6B64\u670D\u52A1\u770B\u770B\u76D1\u63A7\u4F1A\u5982\u4F55\u53D8\u5316\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0ldiuq9naj222a0l2whx.jpg" alt="image-20220324230923472"></p><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u9519\u8BEF\u7387\u76F4\u63A5\u98D9\u5347\u5230 100%\uFF0C\u5E76\u4E14\u4E00\u6BB5\u65F6\u95F4\u5185\u6301\u7EED\u51FA\u73B0\u9519\u8BEF\uFF0C\u4E2D\u5FC3\u7684\u5706\u5708\u4E5F\u53D8\u6210\u4E86\u7EA2\u8272\uFF0C\u6211\u4EEC\u7EE7\u7EED\u8FDB\u884C\u8BBF\u95EE\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0ldjvo0ppj21j20iy0v3.jpg" alt="image-20220324231022133"></p><p>\u5728\u51FA\u73B0\u5927\u91CF\u9519\u8BEF\u7684\u60C5\u51B5\u4E0B\u4FDD\u6301\u6301\u7EED\u8BBF\u95EE\uFF0C\u53EF\u4EE5\u770B\u5230\u6B64\u65F6\u5DF2\u7ECF\u5C06\u670D\u52A1\u7194\u65AD\uFF0C<code>Circuit</code>\u66F4\u6539\u4E3A Open \u72B6\u6001\uFF0C\u5E76\u4E14\u56FE\u4E2D\u7684\u5706\u5708\u4E5F\u53D8\u5F97\u66F4\u5927\uFF0C\u8868\u793A\u538B\u529B\u5728\u6301\u7EED\u4E0A\u5347\u3002</p><hr><h2 id="gateway-\u8DEF\u7531\u7F51\u5173" tabindex="-1">Gateway \u8DEF\u7531\u7F51\u5173 <a class="header-anchor" href="#gateway-\u8DEF\u7531\u7F51\u5173" aria-hidden="true">#</a></h2><p>\u5B98\u7F51\u5730\u5740\uFF1A<a href="https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/</a></p><p>\u8BF4\u5230\u8DEF\u7531\uFF0C\u60F3\u5FC5\u5404\u4F4D\u4E00\u5B9A\u6700\u5148\u60F3\u5230\u7684\u5C31\u662F\u5BB6\u91CC\u7684\u8DEF\u7531\u5668\u4E86\uFF0C\u90A3\u4E48\u6211\u4EEC\u5BB6\u91CC\u7684\u8DEF\u7531\u5668\u5145\u5F53\u7684\u662F\u4E00\u4E2A\u4EC0\u4E48\u89D2\u8272\u5462\uFF1F</p><p>\u6211\u4EEC\u77E5\u9053\uFF0C\u5982\u679C\u6211\u4EEC\u9700\u8981\u8FDE\u63A5\u4E92\u8054\u7F51\uFF0C\u90A3\u4E48\u5C31\u9700\u8981\u5C06\u624B\u673A\u6216\u662F\u7535\u8111\u8FDE\u63A5\u5230\u5BB6\u91CC\u7684\u8DEF\u7531\u5668\u624D\u53EF\u4EE5\uFF0C\u800C\u8DEF\u7531\u5668\u5219\u8FDE\u63A5\u5149\u732B\uFF0C\u5149\u732B\u518D\u901A\u8FC7\u5149\u7EA4\u8FDE\u63A5\u5230\u4E92\u8054\u7F51\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C\u4E92\u8054\u7F51\u65B9\u5411\u53D1\u9001\u8FC7\u6765\u7684\u6570\u636E\uFF0C\u9700\u8981\u7ECF\u8FC7\u8DEF\u7531\u5668\u624D\u80FD\u5230\u8FBE\u6211\u4EEC\u7684\u8BBE\u5907\u3002\u800C\u8DEF\u7531\u5668\u5145\u5F53\u7684\u5C31\u662F\u6570\u636E\u5305\u4E2D\u8F6C\u7AD9\uFF0C\u6240\u6709\u7684\u5C40\u57DF\u7F51\u8BBE\u5907\u90FD\u65E0\u6CD5\u76F4\u63A5\u4E0E\u4E92\u8054\u7F51\u8FDE\u63A5\uFF0C\u800C\u662F\u9700\u8981\u7ECF\u8FC7\u8DEF\u7531\u5668\u8FDB\u884C\u4E2D\u8F6C\uFF0C\u6211\u4EEC\u4E00\u822C\u8BF4\u8DEF\u7531\u5668\u4E0B\u7684\u7F51\u7EDC\u662F\u5185\u7F51\uFF0C\u800C\u4E92\u8054\u7F51\u90A3\u4E00\u7AEF\u662F\u5916\u7F51\u3002</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0l2ejn70ej21di0b4wfr.jpg" alt="image-20220324164439809"></p><p>\u6211\u4EEC\u7684\u5C40\u57DF\u7F51\u8BBE\u5907\uFF0C\u65E0\u6CD5\u88AB\u4E92\u8054\u7F51\u4E0A\u7684\u5176\u4ED6\u8BBE\u5907\u76F4\u63A5\u8BBF\u95EE\uFF0C\u80AF\u5B9A\u662F\u80FD\u591F\u4FDD\u8BC1\u5230\u5B89\u5168\u6027\u7684\u3002\u5E76\u4E92\u8054\u7F51\u53D1\u9001\u8FC7\u6765\u7684\u6570\u636E\uFF0C\u9700\u8981\u7ECF\u8FC7\u8DEF\u7531\u5668\u8FDB\u884C\u89E3\u6790\uFF0C\u8BC6\u522B\u5230\u5E95\u662F\u54EA\u4E00\u4E2A\u8BBE\u5907\u7684\u6570\u636E\u5305\uFF0C\u7136\u540E\u518D\u53D1\u9001\u7ED9\u5BF9\u5E94\u7684\u8BBE\u5907\u3002</p><p>\u800C\u6211\u4EEC\u7684\u5FAE\u670D\u52A1\u4E5F\u662F\u8FD9\u6837\uFF0C\u4E00\u822C\u60C5\u51B5\u4E0B\uFF0C\u53EF\u80FD\u5E76\u4E0D\u662F\u6240\u6709\u7684\u5FAE\u670D\u52A1\u90FD\u9700\u8981\u76F4\u63A5\u66B4\u9732\u7ED9\u5916\u90E8\u8C03\u7528\uFF0C\u8FD9\u65F6\u6211\u4EEC\u5C31\u53EF\u4EE5\u4F7F\u7528\u8DEF\u7531\u673A\u5236\uFF0C\u6DFB\u52A0\u4E00\u5C42\u9632\u62A4\uFF0C\u8BA9\u6240\u6709\u7684\u8BF7\u6C42\u5168\u90E8\u901A\u8FC7\u8DEF\u7531\u6765\u8F6C\u53D1\u5230\u5404\u4E2A\u5FAE\u670D\u52A1\uFF0C\u5E76\u4E14\u8F6C\u53D1\u7ED9\u591A\u4E2A\u76F8\u540C\u5FAE\u670D\u52A1\u5B9E\u4F8B\u4E5F\u53EF\u4EE5\u5B9E\u73B0\u8D1F\u8F7D\u5747\u8861\u3002</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0m1kz3kycj21iq0huwhb.jpg" alt="image-20220325130147758"></p><p>\u5728\u4E4B\u524D\uFF0C\u8DEF\u7531\u7684\u5B9E\u73B0\u4E00\u822C\u4F7F\u7528 Zuul\uFF0C\u4F46\u662F\u5DF2\u7ECF\u505C\u66F4\uFF0C\u800C\u73B0\u5728\u65B0\u51FA\u73B0\u4E86\u7531 SpringCloud \u5B98\u65B9\u5F00\u53D1\u7684 Gateway \u8DEF\u7531\uFF0C\u5B83\u76F8\u6BD4 Zuul \u4E0D\u4EC5\u6027\u80FD\u4E0A\u5F97\u5230\u4E86\u4E00\u5B9A\u7684\u63D0\u5347\uFF0C\u5E76\u4E14\u662F\u5B98\u65B9\u63A8\u51FA\uFF0C\u5951\u5408\u6027\u4E5F\u4F1A\u66F4\u597D\uFF0C\u6240\u4EE5\u6211\u4EEC\u8FD9\u91CC\u5C31\u4E3B\u8981\u8BB2\u89E3 Gateway\u3002</p><h3 id="\u90E8\u7F72\u7F51\u5173" tabindex="-1">\u90E8\u7F72\u7F51\u5173 <a class="header-anchor" href="#\u90E8\u7F72\u7F51\u5173" aria-hidden="true">#</a></h3><p>\u73B0\u5728\u6211\u4EEC\u6765\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u9879\u76EE\uFF0C\u4F5C\u4E3A\u6211\u4EEC\u7684\u7F51\u5173\uFF0C\u8FD9\u91CC\u9700\u8981\u6DFB\u52A0\u4E24\u4E2A\u4F9D\u8D56\uFF1A</p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.cloud</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-cloud-starter-gateway</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.cloud</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-cloud-starter-netflix-eureka-client</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u7B2C\u4E00\u4E2A\u4F9D\u8D56\u5C31\u662F\u7F51\u5173\u7684\u4F9D\u8D56\uFF0C\u800C\u7B2C\u4E8C\u4E2A\u5219\u8DDF\u5176\u4ED6\u5FAE\u670D\u52A1\u4E00\u6837\uFF0C\u9700\u8981\u6CE8\u518C\u5230 Eureka \u624D\u80FD\u751F\u6548\uFF0C\u6CE8\u610F\u522B\u6DFB\u52A0 Web \u4F9D\u8D56\uFF0C\u4F7F\u7528\u7684\u662F WebFlux \u6846\u67B6\u3002</p><p>\u7136\u540E\u6211\u4EEC\u6765\u5B8C\u5584\u4E00\u4E0B\u914D\u7F6E\u6587\u4EF6\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8500</span></span>
<span class="line"><span style="color:#F07178;">eureka</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">client</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">service-url</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">defaultZone</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:8801/eureka, http://localhost:8802/eureka</span></span>
<span class="line"><span style="color:#F07178;">spring</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">application</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gateway</span></span>
<span class="line"></span></code></pre></div><p>\u73B0\u5728\u5C31\u53EF\u4EE5\u542F\u52A8\u4E86\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0l34rlri8j22dw0b80ve.jpg" alt="image-20220324170951878"></p><p>\u4F46\u662F\u73B0\u5728\u8FD8\u6CA1\u6709\u914D\u7F6E\u4EFB\u4F55\u7684\u8DEF\u7531\u529F\u80FD\uFF0C\u6211\u4EEC\u63A5\u7740\u5C06\u8DEF\u7531\u529F\u80FD\u8FDB\u884C\u914D\u7F6E\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">spring</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">cloud</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">gateway</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    	</span><span style="color:#676E95;font-style:italic;"># \u914D\u7F6E\u8DEF\u7531\uFF0C\u6CE8\u610F\u8FD9\u91CC\u662F\u4E2A\u5217\u8868\uFF0C\u6BCF\u4E00\u9879\u90FD\u5305\u542B\u4E86\u5F88\u591A\u4FE1\u606F</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">routes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">borrow-service</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># \u8DEF\u7531\u540D\u79F0</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">uri</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">lb://borrowservice</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u8DEF\u7531\u7684\u5730\u5740\uFF0Clb\u8868\u793A\u4F7F\u7528\u8D1F\u8F7D\u5747\u8861\u5230\u5FAE\u670D\u52A1\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528http\u6B63\u5E38\u8F6C\u53D1</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">predicates</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># \u8DEF\u7531\u89C4\u5219\uFF0C\u65AD\u8A00\u4EC0\u4E48\u8BF7\u6C42\u4F1A\u88AB\u8DEF\u7531</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Path=/borrow/**</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u53EA\u8981\u662F\u8BBF\u95EE\u7684\u8FD9\u4E2A\u8DEF\u5F84\uFF0C\u4E00\u5F8B\u90FD\u88AB\u8DEF\u7531\u5230\u4E0A\u9762\u6307\u5B9A\u7684\u670D\u52A1</span></span>
<span class="line"></span></code></pre></div><p>\u8DEF\u7531\u89C4\u5219\u7684\u8BE6\u7EC6\u5217\u8868\uFF08\u65AD\u8A00\u5DE5\u5382\u5217\u8868\uFF09\u5728\u8FD9\u91CC\uFF1A<a href="https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gateway-request-predicates-factories%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%8C%87%E5%AE%9A%E5%A4%9A%E7%A7%8D%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%8C%85%E6%8B%AC%E6%8C%87%E5%AE%9A%E6%97%B6%E9%97%B4%E6%AE%B5%E3%80%81Cookie%E6%90%BA%E5%B8%A6%E6%83%85%E5%86%B5%E3%80%81Header%E6%90%BA%E5%B8%A6%E6%83%85%E5%86%B5%E3%80%81%E8%AE%BF%E9%97%AE%E7%9A%84%E5%9F%9F%E5%90%8D%E5%9C%B0%E5%9D%80%E3%80%81%E8%AE%BF%E9%97%AE%E7%9A%84%E6%96%B9%E6%B3%95%E3%80%81%E8%B7%AF%E5%BE%84%E3%80%81%E5%8F%82%E6%95%B0%E3%80%81%E8%AE%BF%E9%97%AE%E8%80%85IP%E7%AD%89%E3%80%82%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E9%85%8D%E7%BD%AE%E7%B1%BB%E8%BF%9B%E8%A1%8C%E9%85%8D%E7%BD%AE%EF%BC%8C%E4%BD%86%E6%98%AF%E8%BF%98%E6%98%AF%E6%8E%A8%E8%8D%90%E7%9B%B4%E6%8E%A5%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E7%9C%81%E4%BA%8B%E3%80%82" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gateway-request-predicates-factories\uFF0C\u53EF\u4EE5\u6307\u5B9A\u591A\u79CD\u7C7B\u578B\uFF0C\u5305\u62EC\u6307\u5B9A\u65F6\u95F4\u6BB5\u3001Cookie\u643A\u5E26\u60C5\u51B5\u3001Header\u643A\u5E26\u60C5\u51B5\u3001\u8BBF\u95EE\u7684\u57DF\u540D\u5730\u5740\u3001\u8BBF\u95EE\u7684\u65B9\u6CD5\u3001\u8DEF\u5F84\u3001\u53C2\u6570\u3001\u8BBF\u95EE\u8005IP\u7B49\u3002\u4E5F\u53EF\u4EE5\u4F7F\u7528\u914D\u7F6E\u7C7B\u8FDB\u884C\u914D\u7F6E\uFF0C\u4F46\u662F\u8FD8\u662F\u63A8\u8350\u76F4\u63A5\u914D\u7F6E\u6587\u4EF6\uFF0C\u7701\u4E8B\u3002</a></p><p>\u63A5\u7740\u542F\u52A8\u7F51\u5173\uFF0C\u642D\u8F7D Arm \u67B6\u6784\u82AF\u7247\u7684 Mac \u7535\u8111\u53EF\u80FD\u4F1A\u9047\u5230\u8FD9\u4E2A\u95EE\u9898\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0m59qpakvj21og074q5a.jpg" alt="image-20220325150924472"></p><p>\u8FD9\u662F\u56E0\u4E3A\u6CA1\u6709\u627E\u5230\u9002\u7528\u4E8E\u6B64\u67B6\u6784\u7684\u52A8\u6001\u94FE\u63A5\u5E93\uFF0C\u4E0D\u5F71\u54CD\u4F7F\u7528\uFF0C\u65E0\u89C6\u5373\u53EF\uFF0C\u5E0C\u671B\u4EE5\u540E\u7684\u7248\u672C\u80FD\u4FEE\u590D\u5427\u3002</p><p>\u53EF\u4EE5\u770B\u5230\uFF0C\u6211\u4EEC\u73B0\u5728\u53EF\u4EE5\u76F4\u63A5\u901A\u8FC7\u8DEF\u7531\u6765\u8BBF\u95EE\u6211\u4EEC\u7684\u670D\u52A1\u4E86\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0l3cme88qj226g0a6abq.jpg" alt="image-20220324171724493"></p><p>\u6CE8\u610F\u6B64\u65F6\u4F9D\u7136\u53EF\u4EE5\u901A\u8FC7\u539F\u6709\u7684\u670D\u52A1\u5730\u5740\u8FDB\u884C\u8BBF\u95EE\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0l3efx1npj225c070400.jpg" alt="image-20220324171909828"></p><p>\u8FD9\u6837\u6211\u4EEC\u5C31\u53EF\u4EE5\u5C06\u4E0D\u9700\u8981\u5916\u7F51\u76F4\u63A5\u8BBF\u95EE\u7684\u5FAE\u670D\u52A1\u5168\u90E8\u653E\u5230\u5185\u7F51\u73AF\u5883\u4E0B\uFF0C\u800C\u53EA\u4F9D\u9760\u7F51\u5173\u6765\u5BF9\u5916\u8FDB\u884C\u4EA4\u6D89\u3002</p><h3 id="\u8DEF\u7531\u8FC7\u6EE4\u5668" tabindex="-1">\u8DEF\u7531\u8FC7\u6EE4\u5668 <a class="header-anchor" href="#\u8DEF\u7531\u8FC7\u6EE4\u5668" aria-hidden="true">#</a></h3><p>\u8DEF\u7531\u8FC7\u6EE4\u5668\u652F\u6301\u4EE5\u67D0\u79CD\u65B9\u5F0F\u4FEE\u6539\u4F20\u5165\u7684 HTTP \u8BF7\u6C42\u6216\u4F20\u51FA\u7684 HTTP \u54CD\u5E94\uFF0C\u8DEF\u7531\u8FC7\u6EE4\u5668\u7684\u8303\u56F4\u662F\u67D0\u4E00\u4E2A\u8DEF\u7531\uFF0C\u8DDF\u4E4B\u524D\u7684\u65AD\u8A00\u4E00\u6837\uFF0CSpring Cloud Gateway \u4E5F\u5305\u542B\u8BB8\u591A\u5185\u7F6E\u7684\u8DEF\u7531\u8FC7\u6EE4\u5668\u5DE5\u5382\uFF0C\u8BE6\u7EC6\u5217\u8868\uFF1A<a href="https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gatewayfilter-factories" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#gatewayfilter-factories</a></p><p>\u6BD4\u5982\u6211\u4EEC\u73B0\u5728\u5E0C\u671B\u5728\u8BF7\u6C42\u5230\u8FBE\u65F6\uFF0C\u5728\u8BF7\u6C42\u5934\u4E2D\u6DFB\u52A0\u4E00\u4E9B\u4FE1\u606F\u518D\u8F6C\u53D1\u7ED9\u6211\u4EEC\u7684\u670D\u52A1\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u65F6\u5019\u5C31\u53EF\u4EE5\u4F7F\u7528\u8DEF\u7531\u8FC7\u6EE4\u5668\u6765\u5B8C\u6210\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u5BF9\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u4FEE\u6539\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">spring</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">application</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">gateway</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">cloud</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">gateway</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">routes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">borrow-service</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">uri</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">lb://borrowservice</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">predicates</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Path=/borrow/**</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;"># \u7EE7\u7EED\u6DFB\u52A0\u65B0\u7684\u8DEF\u7531\u914D\u7F6E\uFF0C\u8FD9\u91CC\u5C31\u4EE5\u4E66\u7C4D\u7BA1\u7406\u670D\u52A1\u4E3A\u4F8B</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;"># \u6CE8\u610F-\u8981\u5BF9\u9F50routes:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">book-service</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">uri</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">lb://bookservice</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">predicates</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Path=/book/**</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">filters</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># \u6DFB\u52A0\u8FC7\u6EE4\u5668</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AddRequestHeader=Test, HelloWorld!</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># AddRequestHeader \u5C31\u662F\u6DFB\u52A0\u8BF7\u6C42\u5934\u4FE1\u606F\uFF0C\u5176\u4ED6\u5DE5\u5382\u8BF7\u67E5\u9605\u5B98\u7F51</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6211\u4EEC\u5728 BookController \u4E2D\u83B7\u53D6\u5E76\u8F93\u51FA\u4E00\u4E0B\uFF0C\u770B\u770B\u662F\u4E0D\u662F\u6210\u529F\u6DFB\u52A0\u4E86\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RestController</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">BookController</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Resource</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">BookService</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">RequestMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/book/{bid}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Book</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">findBookById</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">PathVariable</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> bid</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                      </span><span style="color:#C792EA;">HttpServletRequest</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getHeader</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Test</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> service</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBookById</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">bid</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u73B0\u5728\u6211\u4EEC\u901A\u8FC7 Gateway \u8BBF\u95EE\u6211\u4EEC\u7684\u56FE\u4E66\u7BA1\u7406\u670D\u52A1\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0m57rm7t4j21bq07kt9c.jpg" alt="image-20220325150730814"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0m5cstkq3j21v403q0ud.jpg" alt="image-20220325151220776"></p><p>\u53EF\u4EE5\u770B\u5230\u8FD9\u91CC\u6210\u529F\u83B7\u53D6\u5230\u7531\u7F51\u5173\u6DFB\u52A0\u7684\u8BF7\u6C42\u5934\u4FE1\u606F\u4E86\u3002</p><p>\u9664\u4E86\u9488\u5BF9\u4E8E\u67D0\u4E00\u4E2A\u8DEF\u7531\u914D\u7F6E\u8FC7\u6EE4\u5668\u4E4B\u5916\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u81EA\u5B9A\u4E49\u5168\u5C40\u8FC7\u6EE4\u5668\uFF0C\u5B83\u80FD\u591F\u4F5C\u7528\u4E8E\u5168\u5C40\u3002\u4F46\u662F\u6211\u4EEC\u9700\u8981\u901A\u8FC7\u4EE3\u7801\u7684\u65B9\u5F0F\u8FDB\u884C\u7F16\u5199\uFF0C\u6BD4\u5982\u6211\u4EEC\u8981\u5B9E\u73B0\u62E6\u622A\u6CA1\u6709\u643A\u5E26\u6307\u5B9A\u8BF7\u6C42\u53C2\u6570\u7684\u8BF7\u6C42\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Component</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">//\u9700\u8981\u6CE8\u518C\u4E3ABean</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TestFilter</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">GlobalFilter</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Mono</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Void</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">filter</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">ServerWebExchange</span><span style="color:#A6ACCD;"> exchange</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">GatewayFilterChain</span><span style="color:#A6ACCD;"> chain</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">//\u53EA\u9700\u8981\u5B9E\u73B0\u6B64\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u6211\u4EEC\u7F16\u5199\u5224\u65AD\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Mono</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">Void</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">filter</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">ServerWebExchange</span><span style="color:#A6ACCD;"> exchange</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">GatewayFilterChain</span><span style="color:#A6ACCD;"> chain</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//\u5148\u83B7\u53D6ServerHttpRequest\u5BF9\u8C61\uFF0C\u6CE8\u610F\u4E0D\u662FHttpServletRequest</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">ServerHttpRequest</span><span style="color:#A6ACCD;"> request </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> exchange</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getRequest</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//\u6253\u5370\u4E00\u4E0B\u6240\u6709\u7684\u8BF7\u6C42\u53C2\u6570</span></span>
<span class="line"><span style="color:#A6ACCD;">    System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getQueryParams</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//\u5224\u65AD\u662F\u5426\u5305\u542Btest\u53C2\u6570\uFF0C\u4E14\u53C2\u6570\u503C\u4E3A1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> value </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getQueryParams</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">value </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> value</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">contains</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//\u5C06ServerWebExchange\u5411\u8FC7\u6EE4\u94FE\u7684\u4E0B\u4E00\u7EA7\u4F20\u9012\uFF08\u8DDFJavaWeb\u4E2D\u4ECB\u7ECD\u7684\u8FC7\u6EE4\u5668\u5176\u5B9E\u662F\u5DEE\u4E0D\u591A\u7684\uFF09</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> chain</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">exchange</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//\u76F4\u63A5\u5728\u8FD9\u91CC\u4E0D\u518D\u5411\u4E0B\u4F20\u9012\uFF0C\u7136\u540E\u8FD4\u56DE\u54CD\u5E94</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> exchange</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getResponse</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">setComplete</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u53EF\u4EE5\u770B\u5230\u7ED3\u679C\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0m6ahb0zvj21ak07qaah.jpg" alt="image-20220325154443063"></p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0m6axjl3oj21ai072t9h.jpg" alt="image-20220325154508853"></p><p>\u6210\u529F\u5B9E\u73B0\u89C4\u5219\u5224\u65AD\u548C\u62E6\u622A\u64CD\u4F5C\u3002</p><p>\u5F53\u7136\uFF0C\u8FC7\u6EE4\u5668\u80AF\u5B9A\u662F\u53EF\u4EE5\u5B58\u5728\u5F88\u591A\u4E2A\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u624B\u52A8\u6307\u5B9A\u8FC7\u6EE4\u5668\u4E4B\u95F4\u7684\u987A\u5E8F\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Component</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TestFilter</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">implements</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">GlobalFilter</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Ordered</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">//\u5B9E\u73B0Ordered\u63A5\u53E3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getOrder</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6CE8\u610F Order \u7684\u503C\u8D8A\u5C0F\u4F18\u5148\u7EA7\u8D8A\u9AD8\uFF0C\u5E76\u4E14\u65E0\u8BBA\u662F\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\u7F16\u5199\u7684\u5355\u4E2A\u8DEF\u7531\u8FC7\u6EE4\u5668\u8FD8\u662F\u5168\u5C40\u8DEF\u7531\u8FC7\u6EE4\u5668\uFF0C\u90FD\u4F1A\u53D7\u5230 Order \u503C\u5F71\u54CD\uFF08\u5355\u4E2A\u8DEF\u7531\u7684\u8FC7\u6EE4\u5668 Order \u503C\u6309\u4ECE\u4E0A\u5F80\u4E0B\u7684\u987A\u5E8F\u4ECE 1 \u5F00\u59CB\u9012\u589E\uFF09\uFF0C\u6700\u7EC8\u662F\u6309\u7167 Order \u503C\u51B3\u5B9A\u54EA\u4E2A\u8FC7\u6EE4\u5668\u4F18\u5148\u6267\u884C\uFF0C\u5F53 Order \u503C\u4E00\u6837\u65F6 \u5168\u5C40\u8DEF\u7531\u8FC7\u6EE4\u5668\u6267\u884C <code>\u4F18\u4E8E</code> \u5355\u72EC\u7684\u8DEF\u7531\u8FC7\u6EE4\u5668\u6267\u884C\u3002</p><hr><h2 id="config-\u914D\u7F6E\u4E2D\u5FC3" tabindex="-1">Config \u914D\u7F6E\u4E2D\u5FC3 <a class="header-anchor" href="#config-\u914D\u7F6E\u4E2D\u5FC3" aria-hidden="true">#</a></h2><p>**\u5B98\u65B9\u6587\u6863\uFF1A**<a href="https://docs.spring.io/spring-cloud-config/docs/current/reference/html/" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-cloud-config/docs/current/reference/html/</a></p><p>\u7ECF\u8FC7\u524D\u9762\u7684\u5B66\u4E60\uFF0C\u6211\u4EEC\u5BF9\u4E8E\u4E00\u4E2A\u5206\u5E03\u5F0F\u5E94\u7528\u7684\u6280\u672F\u9009\u578B\u548C\u642D\u5EFA\u5DF2\u7ECF\u4E86\u89E3\u5F97\u6BD4\u8F83\u591A\u4E86\uFF0C\u4F46\u662F\u5404\u4F4D\u6709\u6CA1\u6709\u53D1\u73B0\u4E00\u4E2A\u95EE\u9898\uFF0C\u5982\u679C\u6211\u4EEC\u7684\u5FAE\u670D\u52A1\u9879\u76EE\u9700\u8981\u90E8\u7F72\u5F88\u591A\u4E2A\u5B9E\u4F8B\uFF0C\u90A3\u4E48\u914D\u7F6E\u6587\u4EF6\u6211\u4EEC\u5C82\u4E0D\u662F\u5F97\u4E00\u4E2A\u4E00\u4E2A\u53BB\u6539\uFF0C\u53EF\u80FD\u5341\u51E0\u4E2A\u5B9E\u4F8B\u8FD8\u597D\uFF0C\u8981\u662F\u6709\u51E0\u5341\u4E2A\u4E0A\u767E\u4E2A\u5462\uFF1F\u90A3\u6211\u4EEC\u4E00\u4E2A\u4E00\u4E2A\u53BB\u914D\u7F6E\uFF0C\u5C82\u4E0D\u76F4\u63A5\u731D\u6B7B\u5728\u5DE5\u4F4D\u4E0A\u3002</p><p>\u6240\u4EE5\uFF0C\u6211\u4EEC\u9700\u8981\u4E00\u79CD\u66F4\u52A0\u9AD8\u7EA7\u7684\u96C6\u4E2D\u5316\u5730\u914D\u7F6E\u6587\u4EF6\u7BA1\u7406\u5DE5\u5177\uFF0C\u96C6\u4E2D\u5730\u5BF9\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u914D\u7F6E\u3002</p><blockquote><p>Spring Cloud Config \u4E3A\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\u7684\u5916\u90E8\u914D\u7F6E\u63D0\u4F9B\u670D\u52A1\u5668\u7AEF\u548C\u5BA2\u6237\u7AEF\u652F\u6301\u3002\u4F7F\u7528 Config Server\uFF0C\u60A8\u53EF\u4EE5\u96C6\u4E2D\u7BA1\u7406\u6240\u6709\u73AF\u5883\u4E2D\u5E94\u7528\u7A0B\u5E8F\u7684\u5916\u90E8\u914D\u7F6E\u3002</p></blockquote><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0m8zggbzyj21ha0csjt5.jpg" alt="image-20220325171754862"></p><p>\u5B9E\u9645\u4E0A Spring Cloud Config \u5C31\u662F\u4E00\u4E2A\u914D\u7F6E\u4E2D\u5FC3\uFF0C\u6240\u6709\u7684\u670D\u52A1\u90FD\u53EF\u4EE5\u4ECE\u914D\u7F6E\u4E2D\u5FC3\u53D6\u51FA\u914D\u7F6E\uFF0C\u800C\u914D\u7F6E\u4E2D\u5FC3\u53C8\u53EF\u4EE5\u4ECE GitHub \u8FDC\u7A0B\u4ED3\u5E93\u4E2D\u83B7\u53D6\u4E91\u7AEF\u7684\u914D\u7F6E\u6587\u4EF6\uFF0C\u8FD9\u6837\u6211\u4EEC\u53EA\u9700\u8981\u4FEE\u6539 GitHub \u4E2D\u7684\u914D\u7F6E\u5373\u53EF\u5BF9\u6240\u6709\u7684\u670D\u52A1\u8FDB\u884C\u914D\u7F6E\u7BA1\u7406\u4E86\u3002</p><h3 id="\u90E8\u7F72\u914D\u7F6E\u4E2D\u5FC3" tabindex="-1">\u90E8\u7F72\u914D\u7F6E\u4E2D\u5FC3 <a class="header-anchor" href="#\u90E8\u7F72\u914D\u7F6E\u4E2D\u5FC3" aria-hidden="true">#</a></h3><p>\u8FD9\u91CC\u6211\u4EEC\u63A5\u7740\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u9879\u76EE\uFF0C\u5E76\u5BFC\u5165\u4F9D\u8D56\uFF1A</p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.cloud</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-cloud-config-server</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.cloud</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-cloud-starter-netflix-eureka-client</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependencies</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><p>\u8001\u89C4\u77E9\uFF0C\u542F\u52A8\u7C7B\uFF1A</p><div class="language-java"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">SpringBootApplication</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">EnableConfigServer</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ConfigApplication</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        SpringApplication</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ConfigApplication</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">class</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> args</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u63A5\u7740\u5C31\u662F\u914D\u7F6E\u6587\u4EF6\uFF1A</p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8700</span></span>
<span class="line"><span style="color:#F07178;">spring</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">application</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">configserver</span></span>
<span class="line"><span style="color:#F07178;">eureka</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">client</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">service-url</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">defaultZone</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:8801/eureka, http://localhost:8802/eureka</span></span>
<span class="line"></span></code></pre></div><p>\u5148\u542F\u52A8\u4E00\u6B21\u770B\u770B\uFF0C\u80FD\u4E0D\u80FD\u6210\u529F\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0m9lyfoz2j226409uabs.jpg" alt="image-20220325173932623"></p><p>\u8FD9\u91CC\u6211\u4EEC\u4EE5\u672C\u5730\u4ED3\u5E93\u4E3A\u4F8B\uFF08\u5C31\u4E0D\u7528 GitHub \u4E86\uFF0C\u5361\u5230\u6000\u7591\u4EBA\u751F\u4E86\uFF09\uFF0C\u9996\u5148\u5728\u9879\u76EE\u76EE\u5F55\u4E0B\u521B\u5EFA\u4E00\u4E2A\u672C\u5730 Git \u4ED3\u5E93\uFF0C\u6253\u5F00\u7EC8\u7AEF\uFF0C\u5728\u684C\u9762\u4E0A\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u672C\u5730\u4ED3\u5E93\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0mhe24rhjj211q05cabb.jpg" alt="image-20220325220843990"></p><p>\u7136\u540E\u6211\u4EEC\u5728\u6587\u4EF6\u5939\u4E2D\u968F\u4FBF\u521B\u5EFA\u4E00\u4E9B\u914D\u7F6E\u6587\u4EF6\uFF0C\u6CE8\u610F\u540D\u79F0\u6700\u597D\u662F{\u670D\u52A1\u540D\u79F0}-{\u73AF\u5883}.yml\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0mhjqi2o6j216205gaan.jpg" alt="image-20220325221411834"></p><p>\u7136\u540E\u6211\u4EEC\u5728\u914D\u7F6E\u6587\u4EF6\u4E2D\uFF0C\u6DFB\u52A0\u672C\u5730\u4ED3\u5E93\u7684\u4E00\u4E9B\u4FE1\u606F\uFF08\u8FDC\u7A0B\u4ED3\u5E93\u540C\u7406\uFF09\uFF0C\u8BE6\u7EC6\u4F7F\u7528\u6559\u7A0B\uFF1A<a href="https://docs.spring.io/spring-cloud-config/docs/current/reference/html/#_git_backend" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-cloud-config/docs/current/reference/html/#_git_backend</a></p><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">spring</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">cloud</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">config</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">git</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">        	</span><span style="color:#676E95;font-style:italic;"># \u8FD9\u91CC\u586B\u5199\u7684\u662F\u672C\u5730\u4ED3\u5E93\u5730\u5740\uFF0C\u8FDC\u7A0B\u4ED3\u5E93\u76F4\u63A5\u586B\u5199\u8FDC\u7A0B\u4ED3\u5E93\u5730\u5740 http://git...</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">uri</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">file://\${user.home}/Desktop/config-repo</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;"># \u9ED8\u8BA4\u5206\u652F\u8BBE\u5B9A\u4E3A\u4F60\u81EA\u5DF1\u672C\u5730\u6216\u662F\u8FDC\u7A0B\u5206\u652F\u7684\u540D\u79F0</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">default-label</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">main</span></span>
<span class="line"></span></code></pre></div><p>\u7136\u540E\u542F\u52A8\u6211\u4EEC\u7684\u914D\u7F6E\u670D\u52A1\u5668\uFF0C\u901A\u8FC7\u4EE5\u4E0B\u683C\u5F0F\u8FDB\u884C\u8BBF\u95EE\uFF1A</p><ul><li><code>http://localhost:8700/{\u670D\u52A1\u540D\u79F0}/{\u73AF\u5883}/{Git \u5206\u652F}</code></li><li><code>http://localhost:8700/{Git \u5206\u652F}/{\u670D\u52A1\u540D\u79F0}-{\u73AF\u5883}.yml</code></li></ul><p>\u6BD4\u5982\u6211\u4EEC\u8981\u8BBF\u95EE\u56FE\u4E66\u670D\u52A1\u7684\u751F\u4EA7\u73AF\u5883\u4EE3\u7801\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>http://localhost:8700/bookservice/prod/main</code> \u94FE\u63A5\uFF0C\u5B83\u4F1A\u663E\u793A\u8BE6\u7EC6\u4FE1\u606F\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0mhpjeaiyj22is0cadjs.jpg" alt="image-20220325221946363"></p><p>\u4E5F\u53EF\u4EE5\u4F7F\u7528 <code>http://localhost:8700/main/bookservice-prod.yml</code> \u94FE\u63A5\uFF0C\u5B83\u4EC5\u663E\u793A\u914D\u7F6E\u6587\u4EF6\u539F\u6587\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0mht1siqdj21ro0hu41a.jpg" alt="image-20220325222309095"></p><p>\u5F53\u7136\uFF0C\u9664\u4E86\u4F7F\u7528 Git \u6765\u4FDD\u5B58\u4E4B\u5916\uFF0C\u8FD8\u652F\u6301\u4E00\u4E9B\u5176\u4ED6\u7684\u65B9\u5F0F\uFF0C\u8BE6\u7EC6\u60C5\u51B5\u8BF7\u67E5\u9605\u5B98\u7F51\u3002</p><h3 id="\u5BA2\u6237\u7AEF\u914D\u7F6E" tabindex="-1">\u5BA2\u6237\u7AEF\u914D\u7F6E <a class="header-anchor" href="#\u5BA2\u6237\u7AEF\u914D\u7F6E" aria-hidden="true">#</a></h3><p>\u670D\u52A1\u7AEF\u914D\u7F6E\u5B8C\u6210\u4E4B\u540E\uFF0C\u6211\u4EEC\u63A5\u7740\u6765\u914D\u7F6E\u4E00\u4E0B\u5BA2\u6237\u7AEF\uFF0C\u90A3\u4E48\u73B0\u5728\u6211\u4EEC\u7684\u670D\u52A1\u65E2\u7136\u9700\u8981\u4ECE\u670D\u52A1\u5668\u8BFB\u53D6\u914D\u7F6E\u6587\u4EF6\uFF0C\u90A3\u4E48\u5C31\u9700\u8981\u8FDB\u884C\u4E00\u4E9B\u914D\u7F6E\uFF0C\u6211\u4EEC\u5220\u9664\u539F\u6765\u7684<code>application.yml</code>\u6587\u4EF6\uFF08\u4E5F\u53EF\u4EE5\u4FDD\u7559\uFF0C\u6700\u540E\u65E0\u8BBA\u662F\u8FDC\u7AEF\u914D\u7F6E\u8FD8\u662F\u672C\u5730\u914D\u7F6E\u90FD\u4F1A\u88AB\u52A0\u8F7D\uFF09\uFF0C\u6539\u7528<code>bootstrap.yml</code>\uFF08\u5728 application.yml \u4E4B\u524D\u52A0\u8F7D\uFF0C\u53EF\u4EE5\u5B9E\u73B0\u914D\u7F6E\u6587\u4EF6\u8FDC\u7A0B\u83B7\u53D6\uFF09\uFF1A</p><div class="language-xml"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.cloud</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-cloud-starter-config</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.springframework.cloud</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">spring-cloud-starter-bootstrap</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><div class="language-yaml"><span class="copy"></span><pre><code><span class="line"><span style="color:#F07178;">spring</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">cloud</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">config</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    	</span><span style="color:#676E95;font-style:italic;"># \u540D\u79F0\uFF0C\u5176\u5B9E\u5C31\u662F\u6587\u4EF6\u540D\u79F0</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bookservice</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># \u914D\u7F6E\u670D\u52A1\u5668\u7684\u5730\u5740</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">uri</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">http://localhost:8700</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># \u73AF\u5883</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">profile</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">prod</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># \u5206\u652F</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">label</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">main</span></span>
<span class="line"></span></code></pre></div><p>\u914D\u7F6E\u5B8C\u6210\u4E4B\u540E\uFF0C\u542F\u52A8\u56FE\u4E66\u670D\u52A1\uFF1A</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0mii0tbegj22l208k43a.jpg" alt="image-20220325224708591"></p><p>\u53EF\u4EE5\u770B\u5230\u5DF2\u7ECF\u4ECE\u8FDC\u7AEF\u83B7\u53D6\u5230\u4E86\u914D\u7F6E\uFF0C\u5E76\u8FDB\u884C\u542F\u52A8\u3002</p><hr><h2 id="\u5FAE\u670D\u52A1-cap-\u539F\u5219" tabindex="-1">\u5FAE\u670D\u52A1 CAP \u539F\u5219 <a class="header-anchor" href="#\u5FAE\u670D\u52A1-cap-\u539F\u5219" aria-hidden="true">#</a></h2><p>\u7ECF\u8FC7\u524D\u9762\u7684\u5B66\u4E60\uFF0C\u6211\u4EEC\u5BF9 SpringCloud Netflix \u4EE5\u53CA SpringCloud \u5B98\u65B9\u6574\u4E2A\u751F\u6001\u4E0B\u7684\u7EC4\u4EF6\u8BA4\u8BC6\u4E5F\u5DEE\u4E0D\u591A\u4E86\uFF0C\u5165\u95E8\u6559\u5B66\u5C31\u5230\u6B64\u4E3A\u6B62\uFF0C\u4E0B\u4E00\u7AE0\u5C06\u5F00\u542F\u771F\u6B63\u7CBE\u5F69\u7684\u6B63\u7247\u90E8\u5206\uFF0C\u672C\u7AE0\u7684\u6700\u540E\u6211\u4EEC\u8FD8\u662F\u6765\u4E86\u89E3\u4E00\u4E9B\u7406\u8BBA\u4E0A\u7684\u77E5\u8BC6\u3002</p><p><img src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0mj50oc1zj212e0jw756.jpg" alt="image-20220325230915356"></p><blockquote><p>CAP \u539F\u5219\u53C8\u79F0 CAP \u5B9A\u7406\uFF0C\u6307\u7684\u662F\u5728\u4E00\u4E2A\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\uFF0C\u5B58\u5728 Consistency\uFF08\u4E00\u81F4\u6027\uFF09\u3001Availability\uFF08\u53EF\u7528\u6027\uFF09\u3001Partition tolerance\uFF08\u5206\u533A\u5BB9\u9519\u6027\uFF09\uFF0C\u4E09\u8005\u4E0D\u53EF\u540C\u65F6\u4FDD\u8BC1\uFF0C\u6700\u591A\u53EA\u80FD\u4FDD\u8BC1\u5176\u4E2D\u7684\u4E24\u8005\u3002</p><p>\u4E00\u81F4\u6027\uFF08C\uFF09\uFF1A\u5728\u5206\u5E03\u5F0F\u7CFB\u7EDF\u4E2D\u7684\u6240\u6709\u6570\u636E\u5907\u4EFD\uFF0C\u5728\u540C\u4E00\u65F6\u523B\u90FD\u662F\u540C\u6837\u7684\u503C\uFF08\u6240\u6709\u7684\u8282\u70B9\u65E0\u8BBA\u4F55\u65F6\u8BBF\u95EE\u90FD\u80FD\u62FF\u5230\u6700\u65B0\u7684\u503C\uFF09</p><p>\u53EF\u7528\u6027\uFF08A\uFF09\uFF1A\u7CFB\u7EDF\u4E2D\u975E\u6545\u969C\u8282\u70B9\u6536\u5230\u7684\u6BCF\u4E2A\u8BF7\u6C42\u90FD\u5FC5\u987B\u5F97\u5230\u54CD\u5E94\uFF08\u6BD4\u5982\u6211\u4EEC\u4E4B\u524D\u4F7F\u7528\u7684\u670D\u52A1\u964D\u7EA7\u548C\u7194\u65AD\uFF0C\u5176\u5B9E\u5C31\u662F\u4E00\u79CD\u7EF4\u6301\u53EF\u7528\u6027\u7684\u63AA\u65BD\uFF0C\u867D\u7136\u670D\u52A1\u8FD4\u56DE\u7684\u662F\u6CA1\u6709\u4EC0\u4E48\u610F\u4E49\u7684\u6570\u636E\uFF0C\u4F46\u662F\u4E0D\u81F3\u4E8E\u7528\u6237\u7684\u8BF7\u6C42\u4F1A\u88AB\u670D\u52A1\u5668\u5FFD\u7565\uFF09</p><p>\u5206\u533A\u5BB9\u9519\u6027\uFF08P\uFF09\uFF1A\u4E00\u4E2A\u5206\u5E03\u5F0F\u7CFB\u7EDF\u91CC\u9762\uFF0C\u8282\u70B9\u4E4B\u95F4\u7EC4\u6210\u7684\u7F51\u7EDC\u672C\u6765\u5E94\u8BE5\u662F\u8FDE\u901A\u7684\uFF0C\u7136\u800C\u53EF\u80FD\u56E0\u4E3A\u4E00\u4E9B\u6545\u969C\uFF08\u6BD4\u5982\u7F51\u7EDC\u4E22\u5305\u7B49\uFF0C\u8FD9\u662F\u5F88\u96BE\u907F\u514D\u7684\uFF09\uFF0C\u4F7F\u5F97\u6709\u4E9B\u8282\u70B9\u4E4B\u95F4\u4E0D\u8FDE\u901A\u4E86\uFF0C\u6574\u4E2A\u7F51\u7EDC\u5C31\u5206\u6210\u4E86\u51E0\u5757\u533A\u57DF\uFF0C\u6570\u636E\u5C31\u6563\u5E03\u5728\u4E86\u8FD9\u4E9B\u4E0D\u8FDE\u901A\u7684\u533A\u57DF\u4E2D\uFF08\u8FD9\u6837\u5C31\u53EF\u80FD\u51FA\u73B0\u67D0\u4E9B\u88AB\u5206\u533A\u8282\u70B9\u5B58\u653E\u7684\u6570\u636E\u8BBF\u95EE\u5931\u8D25\uFF0C\u6211\u4EEC\u9700\u8981\u6765\u5BB9\u5FCD\u8FD9\u4E9B\u4E0D\u53EF\u9760\u7684\u60C5\u51B5\uFF09</p></blockquote><p>\u603B\u7684\u6765\u8BF4\uFF0C\u6570\u636E\u5B58\u653E\u7684\u8282\u70B9\u6570\u8D8A\u591A\uFF0C\u5206\u533A\u5BB9\u5FCD\u6027\u5C31\u8D8A\u9AD8\uFF0C\u4F46\u662F\u8981\u590D\u5236\u66F4\u65B0\u7684\u6B21\u6570\u5C31\u8D8A\u591A\uFF0C\u4E00\u81F4\u6027\u5C31\u8D8A\u96BE\u4FDD\u8BC1\u3002\u540C\u65F6\u4E3A\u4E86\u4FDD\u8BC1\u4E00\u81F4\u6027\uFF0C\u66F4\u65B0\u6240\u6709\u8282\u70B9\u6570\u636E\u6240\u9700\u8981\u7684\u65F6\u95F4\u5C31\u8D8A\u957F\uFF0C\u90A3\u4E48\u53EF\u7528\u6027\u5C31\u4F1A\u964D\u4F4E\u3002</p><p>\u6240\u4EE5\u8BF4\uFF0C\u53EA\u80FD\u5B58\u5728\u4EE5\u4E0B\u4E09\u79CD\u65B9\u6848\uFF1A</p><h3 id="ac-\u53EF\u7528\u6027-\u4E00\u81F4\u6027" tabindex="-1">AC \u53EF\u7528\u6027+\u4E00\u81F4\u6027 <a class="header-anchor" href="#ac-\u53EF\u7528\u6027-\u4E00\u81F4\u6027" aria-hidden="true">#</a></h3><p>\u8981\u540C\u65F6\u4FDD\u8BC1\u53EF\u7528\u6027\u548C\u4E00\u81F4\u6027\uFF0C\u4EE3\u8868\u7740\u67D0\u4E2A\u8282\u70B9\u6570\u636E\u66F4\u65B0\u4E4B\u540E\uFF0C\u9700\u8981\u7ACB\u5373\u5C06\u7ED3\u679C\u901A\u77E5\u7ED9\u5176\u4ED6\u8282\u70B9\uFF0C\u5E76\u4E14\u8981\u5C3D\u53EF\u80FD\u7684\u5FEB\uFF0C\u8FD9\u6837\u624D\u80FD\u53CA\u65F6\u54CD\u5E94\u4FDD\u8BC1\u53EF\u7528\u6027\uFF0C\u8FD9\u5C31\u5BF9\u7F51\u7EDC\u7684\u7A33\u5B9A\u6027\u8981\u6C42\u975E\u5E38\u9AD8\uFF0C\u4F46\u662F\u5B9E\u9645\u60C5\u51B5\u4E0B\uFF0C\u7F51\u7EDC\u5F88\u5BB9\u6613\u51FA\u73B0\u4E22\u5305\u7B49\u60C5\u51B5\uFF0C\u5E76\u4E0D\u662F\u4E00\u4E2A\u53EF\u9760\u7684\u4F20\u8F93\uFF0C\u5982\u679C\u9700\u8981\u907F\u514D\u8FD9\u79CD\u95EE\u9898\uFF0C\u5C31\u53EA\u80FD\u5C06\u8282\u70B9\u5168\u90E8\u653E\u5728\u4E00\u8D77\uFF0C\u4F46\u662F\u8FD9\u663E\u7136\u8FDD\u80CC\u4E86\u5206\u5E03\u5F0F\u7CFB\u7EDF\u7684\u6982\u5FF5\uFF0C\u6240\u4EE5\u5BF9\u4E8E\u6211\u4EEC\u7684\u5206\u5E03\u5F0F\u7CFB\u7EDF\u6765\u8BF4\uFF0C\u5F88\u96BE\u63A5\u53D7\u3002</p><h3 id="cp-\u4E00\u81F4\u6027-\u5206\u533A\u5BB9\u9519\u6027" tabindex="-1">CP \u4E00\u81F4\u6027+\u5206\u533A\u5BB9\u9519\u6027 <a class="header-anchor" href="#cp-\u4E00\u81F4\u6027-\u5206\u533A\u5BB9\u9519\u6027" aria-hidden="true">#</a></h3><p>\u4E3A\u4E86\u4FDD\u8BC1\u4E00\u81F4\u6027\uFF0C\u90A3\u4E48\u5C31\u5F97\u5C06\u67D0\u4E2A\u8282\u70B9\u7684\u6700\u65B0\u6570\u636E\u53D1\u9001\u7ED9\u5176\u4ED6\u8282\u70B9\uFF0C\u5E76\u4E14\u9700\u8981\u7B49\u5230\u6240\u6709\u8282\u70B9\u90FD\u5F97\u5230\u6570\u636E\u624D\u80FD\u8FDB\u884C\u54CD\u5E94\uFF0C\u540C\u65F6\u6709\u4E86\u5206\u533A\u5BB9\u9519\u6027\uFF0C\u90A3\u4E48\u4EE3\u8868\u6211\u4EEC\u53EF\u4EE5\u5BB9\u5FCD\u7F51\u7EDC\u7684\u4E0D\u53EF\u9760\u95EE\u9898\uFF0C\u6240\u4EE5\u5C31\u7B97\u7F51\u7EDC\u51FA\u73B0\u5361\u987F\uFF0C\u90A3\u4E48\u4E5F\u5FC5\u987B\u7B49\u5F85\u6240\u6709\u8282\u70B9\u5B8C\u6210\u6570\u636E\u540C\u6B65\uFF0C\u624D\u80FD\u8FDB\u884C\u54CD\u5E94\uFF0C\u56E0\u6B64\u5C31\u4F1A\u5BFC\u81F4\u670D\u52A1\u5728\u4E00\u6BB5\u65F6\u95F4\u5185\u5B8C\u5168\u5931\u6548\uFF0C\u6240\u4EE5\u53EF\u7528\u6027\u662F\u65E0\u6CD5\u5F97\u5230\u4FDD\u8BC1\u7684\u3002</p><h3 id="ap-\u53EF\u7528\u6027-\u5206\u533A\u5BB9\u9519\u6027" tabindex="-1">AP \u53EF\u7528\u6027+\u5206\u533A\u5BB9\u9519\u6027 <a class="header-anchor" href="#ap-\u53EF\u7528\u6027-\u5206\u533A\u5BB9\u9519\u6027" aria-hidden="true">#</a></h3><p>\u65E2\u7136 CP \u53EF\u80FD\u4F1A\u5BFC\u81F4\u4E00\u6BB5\u65F6\u95F4\u5185\u670D\u52A1\u5F97\u4E0D\u5230\u4EFB\u4F55\u54CD\u5E94\uFF0C\u90A3\u4E48\u8981\u4FDD\u8BC1\u53EF\u7528\u6027\uFF0C\u5C31\u53EA\u80FD\u653E\u5F03\u8282\u70B9\u4E4B\u95F4\u6570\u636E\u7684\u9AD8\u5EA6\u7EDF\u4E00\uFF0C\u4E5F\u5C31\u662F\u8BF4\u53EF\u4EE5\u5728\u6570\u636E\u4E0D\u7EDF\u4E00\u7684\u60C5\u51B5\u4E0B\uFF0C\u8FDB\u884C\u54CD\u5E94\uFF0C\u56E0\u6B64\u5C31\u65E0\u6CD5\u4FDD\u8BC1\u4E00\u81F4\u6027\u4E86\u3002\u867D\u7136\u8FD9\u6837\u4F1A\u5BFC\u81F4\u62FF\u4E0D\u5230\u6700\u65B0\u7684\u6570\u636E\uFF0C\u4F46\u662F\u53EA\u8981\u6570\u636E\u540C\u6B65\u64CD\u4F5C\u5728\u540E\u53F0\u7EE7\u7EED\u8FD0\u884C\uFF0C\u4E00\u5B9A\u80FD\u591F\u5728\u67D0\u4E00\u65F6\u523B\u5B8C\u6210\u6240\u6709\u8282\u70B9\u6570\u636E\u7684\u540C\u6B65\uFF0C\u90A3\u4E48\u5C31\u80FD\u5B9E\u73B0<strong>\u6700\u7EC8\u4E00\u81F4\u6027</strong>\uFF0C\u6240\u4EE5 AP \u5B9E\u9645\u4E0A\u662F\u6700\u80FD\u63A5\u53D7\u7684\u4E00\u79CD\u65B9\u6848\u3002</p><p>\u6BD4\u5982\u6211\u4EEC\u5B9E\u73B0\u7684 Eureka \u96C6\u7FA4\uFF0C\u5B83\u4F7F\u7528\u7684\u5C31\u662F AP \u65B9\u6848\uFF0CEureka \u5404\u4E2A\u8282\u70B9\u90FD\u662F\u5E73\u7B49\u7684\uFF0C\u5C11\u6570\u8282\u70B9\u6302\u6389\u4E0D\u4F1A\u5F71\u54CD\u6B63\u5E38\u8282\u70B9\u7684\u5DE5\u4F5C\uFF0C\u5269\u4F59\u7684\u8282\u70B9\u4F9D\u7136\u53EF\u4EE5\u63D0\u4F9B\u6CE8\u518C\u548C\u67E5\u8BE2\u670D\u52A1\u3002\u800C Eureka \u5BA2\u6237\u7AEF\u5728\u5411\u67D0\u4E2A Eureka \u670D\u52A1\u7AEF\u6CE8\u518C\u65F6\u5982\u679C\u53D1\u73B0\u8FDE\u63A5\u5931\u8D25\uFF0C\u5219\u4F1A\u81EA\u52A8\u5207\u6362\u81F3\u5176\u4ED6\u8282\u70B9\u3002\u53EA\u8981\u6709\u4E00\u53F0 Eureka \u670D\u52A1\u5668\u6B63\u5E38\u8FD0\u884C\uFF0C\u90A3\u4E48\u5C31\u80FD\u4FDD\u8BC1\u670D\u52A1\u53EF\u7528**\uFF08A\uFF09<strong>\uFF0C\u53EA\u4E0D\u8FC7\u67E5\u8BE2\u5230\u7684\u4FE1\u606F\u53EF\u80FD\u4E0D\u662F\u6700\u65B0\u7684</strong>\uFF08C\uFF09**</p><p>\u5728\u4E4B\u540E\u7684\u7AE0\u8282\uFF0C\u6211\u4EEC\u8FD8\u4F1A\u7EE7\u7EED\u4E86\u89E3\u8FD9\u4E9B\u7406\u8BBA\u7684\u5176\u4ED6\u5B9E\u9645\u5E94\u7528\u3002</p>`,427),e=[o];function t(c,r,D,y,F,A){return a(),n("div",null,e)}var g=s(p,[["render",t]]);export{i as __pageData,g as default};
